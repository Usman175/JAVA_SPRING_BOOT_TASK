{"ast":null,"code":"var _jsxFileName = \"/var/www/php74/bearolefrontend/src/components/modals/addManualtime.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport moment from \"moment-timezone\";\nimport request from \"../../utils/request\";\nimport { ENDPOINT } from \"../../utils/endpoint\";\nimport { getOptions, postOptions } from \"../../utils/httpConfig\";\nimport notifications from \"../../utils/notifications\";\nimport SearchBox from \"../timezoneSearchBox\";\nimport { useSelector } from \"react-redux\";\nlet timeZones = moment.tz.names().filter(tz => tz.match(/^(((Africa|America|Antarctica|Asia|Australia|Europe|Arctic|Atlantic|Indian|Pacific)\\/.+)|(UTC))$/));\nexport const AddManualTime = props => {\n  var _data$memo;\n\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState({\n    date: \"\",\n    timeZone: \"\",\n    startTime: \"\",\n    endTime: \"\",\n    memo: \"\"\n  });\n  const [errorMessage, setErrorMessage] = useState({\n    date: \"\"\n  });\n  const [timezones, setTimezones] = useState([]);\n  useEffect(() => {\n    setTimezones(timeZones);\n  }, [timeZones]);\n  const languageType = useSelector(state => state.languageReducer.languageType);\n\n  const handleValidate = () => {\n    let formIsValid = true;\n    let errorMessage = {};\n\n    if (!data.date) {\n      formIsValid = false;\n      errorMessage[\"date\"] = languageType.THIS_FIELD_REQUIRED;\n    }\n\n    if (!data.timeZone) {\n      formIsValid = false;\n      errorMessage[\"timeZone\"] = languageType.THIS_FIELD_REQUIRED;\n    }\n\n    if (!data.startTime) {\n      formIsValid = false;\n      errorMessage[\"startTime\"] = languageType.THIS_FIELD_REQUIRED;\n    }\n\n    if (!data.endTime) {\n      formIsValid = false;\n      errorMessage[\"endTime\"] = languageType.THIS_FIELD_REQUIRED;\n    }\n\n    if (!data.memo) {\n      formIsValid = false;\n      errorMessage[\"memo\"] = languageType.THIS_FIELD_REQUIRED;\n    }\n\n    setErrorMessage(errorMessage);\n    return formIsValid;\n  };\n\n  const handleSave = async () => {\n    if (handleValidate()) {\n      setLoading(true);\n      let sessionStartTime = moment(new Date(`${data.date} ${data.startTime + \":00\"}`), \"YYYY-MM-DD hh:mm:ss zz\").tz(data.timeZone).toISOString();\n      let sessionEndTime = moment(new Date(`${data.date} ${data.endTime + \":00\"}`), \"YYYY-MM-DD hh:mm:ss zz\").tz(data.timeZone).toISOString();\n      let obj = {\n        userId: props.contractData.userProfile.userId,\n        contractId: props.contractData.projectContractId,\n        contractType: props.contractData.project.projectType,\n        sessionStartTime: sessionStartTime,\n        sessionEndTime: sessionEndTime,\n        memo: data.memo\n      };\n      let result = await request(`${ENDPOINT[\"AddManualTime\"]}`, postOptions(obj));\n\n      if (result.success) {\n        setLoading(false);\n        notifications.showSuccess(languageType.MANUAL_TIME_ADDED);\n        return props.handleClose();\n      } else {\n        setLoading(false);\n        notifications.showError(languageType.SOME_ERROR_TRY_AGAIN);\n      }\n    }\n  };\n\n  const handleChange = (type, e) => {\n    setData({ ...data,\n      [type]: e.target.value\n    });\n    setErrorMessage({ ...errorMessage,\n      [type]: \"\"\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"post_form AddManualTime_formLabelMobile\",\n    onSubmit: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    className: \"form-control\",\n    value: data === null || data === void 0 ? void 0 : data.date,\n    onChange: e => handleChange(\"date\", e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }), errorMessage.date && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }, errorMessage.date))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }, \"Timezone\"), /*#__PURE__*/React.createElement(SearchBox, {\n    id: \"timezone\",\n    name: \"timezone\",\n    placeholder: \"Select timezone\",\n    value: data === null || data === void 0 ? void 0 : data.timeZone,\n    selectItem: value => {\n      setData({ ...data,\n        timeZone: value\n      });\n      setErrorMessage({ ...errorMessage,\n        timeZone: \"\"\n      });\n    },\n    items: timezones,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  }), errorMessage.timeZone && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }, errorMessage.timeZone))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 19\n    }\n  }, \"Start time\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"time\",\n    className: \"form-control\",\n    value: data === null || data === void 0 ? void 0 : data.startTime,\n    onChange: e => handleChange(\"startTime\", e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 19\n    }\n  }), errorMessage.startTime && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 21\n    }\n  }, errorMessage.startTime))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 19\n    }\n  }, \"End time\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"time\",\n    className: \"form-control\",\n    value: data === null || data === void 0 ? void 0 : data.endTime,\n    onChange: e => handleChange(\"endTime\", e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 19\n    }\n  }), errorMessage.endTime && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 21\n    }\n  }, errorMessage.endTime))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }, \"Memo\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"form-control\",\n    value: data === null || data === void 0 ? void 0 : data.memo,\n    style: {\n      height: 38\n    },\n    onChange: e => handleChange(\"memo\", e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-6 col-sm-6 col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }, errorMessage.memo && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }, errorMessage.memo)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-6 col-sm-6 col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 19\n    }\n  }, \" \", 1000 - (data === null || data === void 0 ? void 0 : (_data$memo = data.memo) === null || _data$memo === void 0 ? void 0 : _data$memo.length) + \" \", \"character remaining\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-10 col-md-10 col-sm-12 justify-content-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }, \"Note: Manual time does not quality for Jungle work Hourly protection\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"save_cancel text-center mb-0 AddManualTime_btnMobile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn save_btn\",\n    onClick: handleSave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  }, \"Save\", \" \", loading ? /*#__PURE__*/React.createElement(\"i\", {\n    style: {\n      marginLeft: \"5px\"\n    },\n    className: \"fa fa-spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }) : \"\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn cancel_btn\",\n    onClick: props.handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }, \"Cancel\")));\n};","map":{"version":3,"sources":["/var/www/php74/bearolefrontend/src/components/modals/addManualtime.jsx"],"names":["React","useState","useEffect","useHistory","moment","request","ENDPOINT","getOptions","postOptions","notifications","SearchBox","useSelector","timeZones","tz","names","filter","match","AddManualTime","props","history","loading","setLoading","data","setData","date","timeZone","startTime","endTime","memo","errorMessage","setErrorMessage","timezones","setTimezones","languageType","state","languageReducer","handleValidate","formIsValid","THIS_FIELD_REQUIRED","handleSave","sessionStartTime","Date","toISOString","sessionEndTime","obj","userId","contractData","userProfile","contractId","projectContractId","contractType","project","projectType","result","success","showSuccess","MANUAL_TIME_ADDED","handleClose","showError","SOME_ERROR_TRY_AGAIN","handleChange","type","e","target","value","preventDefault","height","length","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport moment from \"moment-timezone\";\nimport request from \"../../utils/request\";\nimport { ENDPOINT } from \"../../utils/endpoint\";\nimport { getOptions, postOptions } from \"../../utils/httpConfig\";\nimport notifications from \"../../utils/notifications\";\nimport SearchBox from \"../timezoneSearchBox\";\nimport {useSelector} from \"react-redux\";\n\nlet timeZones = moment.tz\n  .names()\n  .filter((tz) =>\n    tz.match(\n      /^(((Africa|America|Antarctica|Asia|Australia|Europe|Arctic|Atlantic|Indian|Pacific)\\/.+)|(UTC))$/\n    )\n  );\n\nexport const AddManualTime = (props) => {\n  const history = useHistory();\n  \n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState({\n    date: \"\",\n    timeZone: \"\",\n    startTime: \"\",\n    endTime: \"\",\n    memo: \"\",\n  });\n  const [errorMessage, setErrorMessage] = useState({ date: \"\" });\n  const [timezones, setTimezones] = useState([]);\n\n  useEffect(() => {\n    setTimezones(timeZones);\n  }, [timeZones]);\n  const languageType = useSelector(\n    (state) => state.languageReducer.languageType \n);\n  const handleValidate = () => {\n    let formIsValid = true;\n    let errorMessage = {};\n    if (!data.date) {\n      formIsValid = false;\n      errorMessage[\"date\"] = languageType.THIS_FIELD_REQUIRED;\n    }\n    if (!data.timeZone) {\n      formIsValid = false;\n      errorMessage[\"timeZone\"] = languageType.THIS_FIELD_REQUIRED;\n    }\n    if (!data.startTime) {\n      formIsValid = false;\n      errorMessage[\"startTime\"] = languageType.THIS_FIELD_REQUIRED;\n    }\n    if (!data.endTime) {\n      formIsValid = false;\n      errorMessage[\"endTime\"] = languageType.THIS_FIELD_REQUIRED;\n    }\n    if (!data.memo) {\n      formIsValid = false;\n      errorMessage[\"memo\"] = languageType.THIS_FIELD_REQUIRED;\n    }\n    setErrorMessage(errorMessage);\n    return formIsValid;\n  };\n  const handleSave =async () => {\n    if (handleValidate()) {\n      setLoading(true)\n      let sessionStartTime = moment(\n        new Date(`${data.date} ${data.startTime + \":00\"}`),\n        \"YYYY-MM-DD hh:mm:ss zz\"\n      )\n        .tz(data.timeZone)\n        .toISOString();\n      let sessionEndTime = moment(\n        new Date(`${data.date} ${data.endTime + \":00\"}`),\n        \"YYYY-MM-DD hh:mm:ss zz\"\n      )\n        .tz(data.timeZone)\n        .toISOString();\n      let obj = {\n        userId: props.contractData.userProfile.userId,\n        contractId:  props.contractData.projectContractId,\n        contractType:props.contractData.project.projectType,\n        sessionStartTime: sessionStartTime,\n        sessionEndTime: sessionEndTime,\n        memo: data.memo,\n      };\n      let result = await request(\n        `${ENDPOINT[\"AddManualTime\"]}`,\n        postOptions(obj)\n      );\n      if (result.success) {\n        setLoading(false)\n        notifications.showSuccess(languageType.MANUAL_TIME_ADDED)\n        return props.handleClose();\n\n      } else {\n        setLoading(false)\n        notifications.showError(languageType.SOME_ERROR_TRY_AGAIN)\n      }\n    \n      \n    }\n  };\n\n  const handleChange = (type, e) => {\n    setData({ ...data, [type]: e.target.value });\n    setErrorMessage({ ...errorMessage, [type]: \"\" });\n  };\n\n  return (\n    <>\n      <form className=\"post_form AddManualTime_formLabelMobile\" onSubmit={(e) => e.preventDefault()}>\n        <div className=\"row\">\n          <div className=\"col-lg-12\">\n            <div className=\"form-group\">\n              <label>Date</label>\n              <input\n                type=\"date\"\n                className=\"form-control\"\n                value={data?.date}\n                onChange={(e) => handleChange(\"date\", e)}\n              />\n              {errorMessage.date && (\n                <p className=\"text-danger\">{errorMessage.date}</p>\n              )}\n              {/* <input\n                type=\"text\"\n                className=\"form-control\"\n                // value={this.state.title}\n                placeholder=\"Job Title\"\n                maxLength=\"100\"\n                // onChange={(e) => this.handleChange(\"title\", e)}\n              /> */}\n              {/* {this.state.errorMessage.title && (\n                <p className=\"text-danger\"> {this.state.errorMessage.title} </p>\n              )} */}\n            </div>\n          </div>\n          <div className=\"col-lg-12\">\n            <div className=\"form-group\">\n              <label>Timezone</label>\n              <SearchBox\n                id=\"timezone\"\n                name=\"timezone\"\n                placeholder=\"Select timezone\"\n                value={data?.timeZone}\n                selectItem={(value) => {\n                  setData({ ...data, timeZone: value });\n                  setErrorMessage({ ...errorMessage, timeZone: \"\" });\n                }}\n                items={timezones}\n              />\n              {errorMessage.timeZone && (\n                <p className=\"text-danger\">{errorMessage.timeZone}</p>\n              )}\n            </div>\n          </div>\n\n          <div className=\"col-lg-12\">\n            <div className=\"row\">\n              <div className=\"col-lg-6\">\n                <div className=\"form-group\">\n                  <label>Start time</label>\n                  <input\n                    type=\"time\"\n                    className=\"form-control\"\n                    value={data?.startTime}\n                    onChange={(e) => handleChange(\"startTime\", e)}\n                  />\n                  {errorMessage.startTime && (\n                    <p className=\"text-danger\">{errorMessage.startTime}</p>\n                  )}\n                </div>\n              </div>\n              <div className=\"col-lg-6\">\n                <div className=\"form-group\">\n                  <label>End time</label>\n                  <input\n                    type=\"time\"\n                    className=\"form-control\"\n                    value={data?.endTime}\n                    onChange={(e) => handleChange(\"endTime\", e)}\n                  />\n                  {errorMessage.endTime && (\n                    <p className=\"text-danger\">{errorMessage.endTime}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"col-lg-12\">\n            <div className=\"form-group\">\n              <label>Memo</label>\n              <textarea\n                className=\"form-control\"\n                value={data?.memo}\n                style={{ height: 38 }}\n                onChange={(e) => handleChange(\"memo\", e)}\n              />\n              <div className=\"row\">\n                <div className=\"col-lg-6 col-sm-6 col-md-6\">\n                  {errorMessage.memo && (\n                    <p className=\"text-danger\">{errorMessage.memo}</p>\n                  )}\n                </div>\n                <div className=\"col-lg-6 col-sm-6 col-md-6\">\n                  <p> {1000 - data?.memo?.length + \" \"}character remaining</p>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"col-lg-10 col-md-10 col-sm-12 justify-content-right\">\n            <p>\n              Note: Manual time does not quality for Jungle work Hourly\n              protection\n            </p>\n          </div>\n        </div>\n      </form>\n      <div className=\"save_cancel text-center mb-0 AddManualTime_btnMobile\">\n        <button type=\"button\" className=\"btn save_btn\" onClick={handleSave}>\n          Save{\" \"}\n          {loading ? (\n            <i\n              style={{ marginLeft: \"5px\" }}\n              className=\"fa fa-spinner fa-spin\"\n            ></i>\n          ) : (\n            \"\"\n          )}\n        </button>\n        <button\n          type=\"button\"\n          className=\"btn cancel_btn\"\n          onClick={props.handleClose}\n        >\n          Cancel\n        </button>\n      </div>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}