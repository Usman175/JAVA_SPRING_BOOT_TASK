{"ast":null,"code":"var _jsxFileName = \"/var/www/php74/bearolefrontend/src/shared/auth/private-route.jsx\";\nimport React, { Suspense, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport { MY_CHANNEL_LIST, TOGGLE_FOOTER_SETTINGS } from \"../../store/constants/constant.js\";\nimport ErrorBoundary from \"../error/error-boundary\";\nimport LoginRequired from \"../../components/modals/loginRequired\";\nimport FallBackComponent from \"../../components/fallBackComponent.js\";\nexport const PrivateRouteComponent = ({\n  component: Component,\n  isAuthenticated,\n  authUser = null,\n  setFooterSetting,\n  isClient,\n  isFreelancer = false,\n  freelancerClientAuth,\n  isPrivate,\n  ...rest\n}) => {\n  const freelancerTypes = [\"freelancer\", \"company\", \"agency\"];\n\n  const setFooter = value => {\n    setFooterSetting(value);\n  };\n\n  useEffect(() => {\n    if (authUser == null) {\n      setFooter(false);\n    } else {\n      setFooter(true);\n    }\n\n    return function cleanup() {\n      setFooter(true);\n    };\n  }, []);\n\n  const checkAuthorities = props => authUser ? /*#__PURE__*/React.createElement(ErrorBoundary, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(FallBackComponent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 29\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  })))) : /*#__PURE__*/React.createElement(React.Fragment, null);\n\n  const renderRedirect = props => {\n    let redirectURl = window.location.href.replace(window.location.href.split(\"/\")[window.location.href.split(\"/\").length - 1], \"\");\n\n    if (authUser !== null) {\n      if (isPrivate && isFreelancer && isClient) {\n        var _freelancerClientAuth, _freelancerClientAuth2, _freelancerClientAuth3;\n\n        if (((_freelancerClientAuth = freelancerClientAuth.freelancerAuth) === null || _freelancerClientAuth === void 0 ? void 0 : _freelancerClientAuth.individualFreelancerId) || ((_freelancerClientAuth2 = freelancerClientAuth.organizationAuth) === null || _freelancerClientAuth2 === void 0 ? void 0 : _freelancerClientAuth2.organizationId) || ((_freelancerClientAuth3 = freelancerClientAuth.clientAuth) === null || _freelancerClientAuth3 === void 0 ? void 0 : _freelancerClientAuth3.clientId)) {\n          return checkAuthorities(props);\n        } else {\n          if (sessionStorage.userType === \"Client\") {\n            props.history.push(\"/client-registration\");\n          }\n\n          if (sessionStorage.userType === \"Freelancer\") {\n            props.history.push(\"/user-registration\");\n          }\n        }\n      } else if (isPrivate && isFreelancer && !isClient) {\n        var _freelancerClientAuth4, _freelancerClientAuth5;\n\n        if (((_freelancerClientAuth4 = freelancerClientAuth.freelancerAuth) === null || _freelancerClientAuth4 === void 0 ? void 0 : _freelancerClientAuth4.individualFreelancerId) || ((_freelancerClientAuth5 = freelancerClientAuth.organizationAuth) === null || _freelancerClientAuth5 === void 0 ? void 0 : _freelancerClientAuth5.organizationId)) {\n          return checkAuthorities(props);\n        } else {\n          props.history.push(\"/user-registration\");\n        }\n      } else if (isPrivate && !isFreelancer && isClient) {\n        var _freelancerClientAuth6;\n\n        if ((_freelancerClientAuth6 = freelancerClientAuth.clientAuth) === null || _freelancerClientAuth6 === void 0 ? void 0 : _freelancerClientAuth6.clientId) {\n          return checkAuthorities(props);\n        } else {\n          props.history.push(\"/client-registration\");\n        }\n      } else if (isPrivate) {\n        return checkAuthorities(props);\n      }\n    } else {\n      var _sessionStorage$userT;\n\n      localStorage.setItem(\"startRegisterWith\", (_sessionStorage$userT = sessionStorage.userType) === null || _sessionStorage$userT === void 0 ? void 0 : _sessionStorage$userT.toLowerCase());\n      window.location.href = `https://www.syncbench.com/#/sign-in?callback=${redirectURl}&storeid=HOQF9I`;\n    }\n  };\n\n  if (!Component) throw new Error(`A component needs to be specified for private route for path ${rest.path}`);\n  return /*#__PURE__*/React.createElement(Route, Object.assign({}, rest, {\n    render: renderRedirect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 10\n    }\n  }));\n};\n\nconst mapStateToProps = state => {\n  var _state$authReducer;\n\n  return {\n    authUser: (_state$authReducer = state.authReducer) === null || _state$authReducer === void 0 ? void 0 : _state$authReducer.myAuth,\n    freelancerClientAuth: state.authReducer\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setFooterSetting: value => dispatch({\n    type: TOGGLE_FOOTER_SETTINGS,\n    data: value\n  })\n});\n/**\n * A route wrapped in an authentication check so that routing happens only when you are authenticated.\n * Accepts same props as React router Route.\n * The route also checks for authorization if hasAnyAuthorities is specified.\n */\n\n\nexport const PrivateRoute = connect(mapStateToProps, mapDispatchToProps, null, {\n  pure: false\n})(PrivateRouteComponent);\nexport default PrivateRoute;","map":{"version":3,"sources":["/var/www/php74/bearolefrontend/src/shared/auth/private-route.jsx"],"names":["React","Suspense","useEffect","connect","Route","Redirect","MY_CHANNEL_LIST","TOGGLE_FOOTER_SETTINGS","ErrorBoundary","LoginRequired","FallBackComponent","PrivateRouteComponent","component","Component","isAuthenticated","authUser","setFooterSetting","isClient","isFreelancer","freelancerClientAuth","isPrivate","rest","freelancerTypes","setFooter","value","cleanup","checkAuthorities","props","renderRedirect","redirectURl","window","location","href","replace","split","length","freelancerAuth","individualFreelancerId","organizationAuth","organizationId","clientAuth","clientId","sessionStorage","userType","history","push","localStorage","setItem","toLowerCase","Error","path","mapStateToProps","state","authReducer","myAuth","mapDispatchToProps","dispatch","type","data","PrivateRoute","pure"],"mappings":"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","sourcesContent":["import React, { Suspense, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport {\n  MY_CHANNEL_LIST,\n  TOGGLE_FOOTER_SETTINGS,\n} from \"../../store/constants/constant.js\";\nimport ErrorBoundary from \"../error/error-boundary\";\nimport LoginRequired from \"../../components/modals/loginRequired\";\nimport FallBackComponent from \"../../components/fallBackComponent.js\";\n\nexport const PrivateRouteComponent = ({\n  component: Component,\n  isAuthenticated,\n  authUser = null,\n  setFooterSetting,\n  isClient,\n  isFreelancer = false,\n  freelancerClientAuth,\n  isPrivate,\n  ...rest\n}) => {\n  const freelancerTypes = [\"freelancer\", \"company\", \"agency\"];\n\n  const setFooter = (value) => {\n    setFooterSetting(value);\n  };\n\n  useEffect(() => {\n    if (authUser == null) {\n      setFooter(false);\n    } else {\n      setFooter(true);\n    }\n    return function cleanup() {\n      setFooter(true);\n    };\n  }, []);\n\n  const checkAuthorities = (props) =>\n    authUser ? (\n      <ErrorBoundary>\n        <Suspense fallback={<FallBackComponent />}>\n          <Component {...props} />\n        </Suspense>\n      </ErrorBoundary>\n    ) : (\n      <></>\n    );\n\n  const renderRedirect = (props) => {\n    let redirectURl = window.location.href.replace(\n      window.location.href.split(\"/\")[\n        window.location.href.split(\"/\").length - 1\n      ],\n      \"\"\n    );\n    if (authUser !== null) {\n      if (isPrivate && isFreelancer && isClient) {\n        if (\n          freelancerClientAuth.freelancerAuth?.individualFreelancerId ||\n          freelancerClientAuth.organizationAuth?.organizationId ||\n          freelancerClientAuth.clientAuth?.clientId\n        ) {\n          return checkAuthorities(props);\n        } else {\n          if (sessionStorage.userType === \"Client\") {\n            props.history.push(\"/client-registration\");\n          }\n          if (sessionStorage.userType === \"Freelancer\") {\n            props.history.push(\"/user-registration\");\n          }\n        }\n      } else if (isPrivate && isFreelancer && !isClient) {\n        if (\n          freelancerClientAuth.freelancerAuth?.individualFreelancerId ||\n          freelancerClientAuth.organizationAuth?.organizationId\n        ) {\n          return checkAuthorities(props);\n        } else {\n          props.history.push(\"/user-registration\");\n        }\n      } else if (isPrivate && !isFreelancer && isClient) {\n        if (freelancerClientAuth.clientAuth?.clientId) {\n          return checkAuthorities(props);\n        } else {\n          props.history.push(\"/client-registration\");\n        }\n      } else if (isPrivate) {\n        return checkAuthorities(props);\n      }\n    } else {\n      localStorage.setItem(\n        \"startRegisterWith\",\n        sessionStorage.userType?.toLowerCase()\n      );\n      window.location.href = `https://www.syncbench.com/#/sign-in?callback=${redirectURl}&storeid=HOQF9I`;\n    }\n  };\n\n  if (!Component)\n    throw new Error(\n      `A component needs to be specified for private route for path ${rest.path}`\n    );\n\n  return <Route {...rest} render={renderRedirect} />;\n};\n\nconst mapStateToProps = (state) => ({\n  authUser: state.authReducer?.myAuth,\n  freelancerClientAuth: state.authReducer,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  setFooterSetting: (value) =>\n    dispatch({ type: TOGGLE_FOOTER_SETTINGS, data: value }),\n});\n\n/**\n * A route wrapped in an authentication check so that routing happens only when you are authenticated.\n * Accepts same props as React router Route.\n * The route also checks for authorization if hasAnyAuthorities is specified.\n */\nexport const PrivateRoute = connect(mapStateToProps, mapDispatchToProps, null, {\n  pure: false,\n})(PrivateRouteComponent);\n\nexport default PrivateRoute;\n"]},"metadata":{},"sourceType":"module"}