{"ast":null,"code":"var _jsxFileName = \"/var/www/php74/bearolefrontend/src/container/client/contractDetail/sharedComponents/contractDetail.js\";\nimport React, { useEffect, useState, useRef } from \"react\";\nimport \"../contractDetail.scss\";\nimport Format from \"../../../../components/numberFormat\";\nimport { UserView } from \"../../../../components/freelancer/userView\";\nimport moment from \"moment\";\nimport { useSelector } from \"react-redux\";\nimport 'react-notify-alert/dist/index.css';\nimport request from \"../../../../utils/request\";\nimport { ENDPOINT } from \"../../../../utils/endpoint\";\nimport { getOptions, postOptions } from \"../../../../utils/httpConfig\";\nimport Skeleton from \"../../../../components/skeleton/skeleton\";\nimport Pagination from \"../../../../components/pagination\";\nimport notifications from \"../../../../utils/notifications\";\nimport NoDataAvailable from \"../../../../shared/error/not-data-available-new\";\nimport MyProjectsCards from \"../../../../components/project/MyprojectsCards/myprojectsCards\";\nimport Modal from \"react-bootstrap/Modal\";\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\nimport CancelPresentationIcon from '@material-ui/icons/CancelPresentation';\nimport Button from '@material-ui/core/Button';\n\nfunction ContractDetail(props) {\n  var _props$contractDetail, _props$contractDetail2, _props$contractDetail3, _props$contractDetail4, _props$contractDetail5, _props$contractDetail6, _props$contractDetail9, _props$contractDetail10, _props$contractDetail11, _props$contractDetail12, _props$contractDetail13, _props$contractDetail14, _user$clientAuth, _user$clientAuth2, _props$contractDetail15;\n\n  const [unpaidAmount, setUnpaidAmount] = useState(0.0);\n  const [isContractDetailSectionExpanded, setIsContractDetailSectionExpanded] = useState(true);\n  const [contractStats, setContractStats] = useState({\n    rate: ((_props$contractDetail = props.contractDetail) === null || _props$contractDetail === void 0 ? void 0 : _props$contractDetail.finalizedHourlyRate) ? (_props$contractDetail2 = props.contractDetail) === null || _props$contractDetail2 === void 0 ? void 0 : _props$contractDetail2.finalizedHourlyRate : 0,\n    weekLimit: ((_props$contractDetail3 = props.contractDetail) === null || _props$contractDetail3 === void 0 ? void 0 : _props$contractDetail3.finalizedHourOfWeek) ? (_props$contractDetail4 = props.contractDetail) === null || _props$contractDetail4 === void 0 ? void 0 : _props$contractDetail4.finalizedHourOfWeek : 0,\n    dailyRate: props.projectDetail.projectType === \"OfficeWork\" && ((_props$contractDetail5 = props.contractDetail) === null || _props$contractDetail5 === void 0 ? void 0 : _props$contractDetail5.finalizedSalarayAmount) ? (_props$contractDetail6 = props.contractDetail) === null || _props$contractDetail6 === void 0 ? void 0 : _props$contractDetail6.finalizedSalarayAmount : props.contractDetail.finalizedDailyRate ? props.contractDetail.finalizedDailyRate : 0,\n    milestoneAmount: props.contractDetail.finalizedMilestoneAmount ? props.contractDetail.finalizedMilestoneAmount : '0'\n  });\n  const [isRateEditable, setIsRateEditable] = useState(false);\n  const [isDailyRateEditable, setIsDailyRateEditable] = useState(false);\n  const [isWeekLimitEditable, setIsWeekLimitEditable] = useState(false);\n  const [isMilestoneAmountEditable, setIsMilestoneAmountEditable] = useState(false);\n  const [isManualTimeAllow, setIsManualTimeAllow] = useState(true);\n  const [projectHistory, setProjectHistory] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [isSavedFlag, setIsSavedFlag] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const [pagination, setPagination] = useState({\n    pageSize: 10,\n    pageNumber: 1,\n    total: 10\n  });\n  const [contractHistoryData, setContractHistoryData] = useState([]);\n  const [contractHistoryLoading, setContractHistoryLoading] = useState(false);\n  const wrapperRef = useRef(null);\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (wrapperRef.current && !wrapperRef.current.contains(event.target)) {\n        setOpen(true);\n      }\n    } // Bind the event listener\n\n\n    if (!isSavedFlag) {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n    } else {\n      return () => {\n        // Unbind the event listener on clean up\n        document.removeEventListener(\"mousedown\", handleClickOutside);\n      };\n    }\n\n    return () => {\n      // Unbind the event listener on clean up\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [wrapperRef, isSavedFlag]);\n  const user = useSelector(state => state.authReducer);\n\n  const onExpansionChange = () => {\n    setIsContractDetailSectionExpanded(!isContractDetailSectionExpanded);\n  };\n\n  useEffect(() => {\n    if (props.contractDetail.projectContractId) {\n      var _props$contractDetail7, _props$contractDetail8;\n\n      setContractStats({ ...contractStats,\n        milestoneAmount: props.contractDetail.finalizedMilestoneAmount,\n        dailyRate: props.projectDetail.projectType === \"OfficeWork\" && ((_props$contractDetail7 = props.contractDetail) === null || _props$contractDetail7 === void 0 ? void 0 : _props$contractDetail7.finalizedSalarayAmount) ? (_props$contractDetail8 = props.contractDetail) === null || _props$contractDetail8 === void 0 ? void 0 : _props$contractDetail8.finalizedSalarayAmount : props.contractDetail.finalizedDailyRate ? props.contractDetail.finalizedDailyRate : 0,\n        rate: props.contractDetail.finalizedHourlyRate,\n        weekLimit: props.contractDetail.finalizedHourOfWeek\n      });\n    }\n\n    if (props.contractDetail.projectContractId) {\n      getContractHistory();\n    }\n  }, [props.contractDetail]);\n\n  const onEditIconClick = name => {\n    if (name === \"isRateEditable\") {\n      document.getElementsByName(\"rate\")[0] && document.getElementsByName(\"rate\")[0].focus();\n      setIsRateEditable(!isRateEditable);\n      setIsDailyRateEditable(false);\n    } else if (name === \"isDailyRateEditable\") {\n      document.getElementsByName(\"dailyRate\")[0] && document.getElementsByName(\"dailyRate\")[0].focus();\n      setIsDailyRateEditable(!isRateEditable);\n      setIsRateEditable(false);\n    } else if (name === \"isWeekLimitEditable\") {\n      document.getElementsByName(\"weekLimit\")[0] && document.getElementsByName(\"weekLimit\")[0].focus();\n      setIsWeekLimitEditable(!isWeekLimitEditable);\n    }\n  };\n\n  const onTextHandleChange = (e, type) => {\n    if (type === \"weekLimit\") {\n      setContractStats({ ...contractStats,\n        weekLimit: e.target.value\n      });\n    } else {\n      setContractStats({ ...contractStats,\n        [type]: e.target.value\n      });\n    }\n  };\n\n  const getContractHistory = async move => {\n    var _props$userProfile;\n\n    let userId = (_props$userProfile = props.userProfile) === null || _props$userProfile === void 0 ? void 0 : _props$userProfile.userId;\n    let projectContractId = props.contractDetail.projectContractId;\n    let projectId = props.projectDetail.projectId;\n    let pageNumber = pagination.pageNumber;\n    setContractHistoryLoading(true);\n\n    if (move === \"next\") {\n      setPagination({ ...pagination,\n        pageNumber: pagination.pageNumber + 1\n      });\n      pageNumber = pageNumber + 1;\n    } else if (move === \"prev\") {\n      setPagination({ ...pagination,\n        pageNumber: pagination.pageNumber - 1\n      });\n      pageNumber = pageNumber - 1;\n    }\n\n    let result = await request(`${ENDPOINT[\"GetProjectContractHistory\"]}?projectContractId=${projectContractId}&userId=${userId}&projectId=${projectId}&pageNumber=${pageNumber}&pageSize=${pagination.pageSize}`, getOptions({}));\n\n    if (result.success) {\n      setContractHistoryData(result.result.entries);\n      setPagination({\n        pageNumber: result.result.pageNumber || result.result.pageNumer,\n        pageSize: result.result.pageSize,\n        total: result.result.total\n      });\n      setContractHistoryLoading(false);\n    } else {}\n\n    setContractHistoryLoading(false);\n  };\n\n  const saveChangesContract = async () => {\n    let param;\n\n    if (props.projectDetail.projectType === \"Hourly\") {\n      param = {\n        projectId: props.projectDetail.projectId,\n        projectContractId: props.contractDetail.projectContractId,\n        finalizedHourlyRate: contractStats.rate,\n        finalizedHourOfWeek: contractStats.weekLimit,\n        allowManualTimeLog: isManualTimeAllow,\n        finalizedMilestoneAmount: '',\n        finalizedDailyRate: ''\n      };\n    }\n\n    if (props.projectDetail.projectType === \"FreeContract\") {\n      param = {\n        projectId: props.projectDetail.projectId,\n        projectContractId: props.contractDetail.projectContractId,\n        finalizedHourlyRate: contractStats.rate,\n        finalizedHourOfWeek: contractStats.weekLimit,\n        allowManualTimeLog: isManualTimeAllow,\n        finalizedMilestoneAmount: '',\n        finalizedDailyRate: contractStats.dailyRate\n      };\n    }\n\n    if (props.projectDetail.projectType === \"Milestone\") {\n      param = {\n        projectId: props.projectDetail.projectId,\n        projectContractId: props.contractDetail.projectContractId,\n        finalizedHourlyRate: '',\n        finalizedHourOfWeek: '',\n        finalizedMilestoneAmount: contractStats.milestoneAmount,\n        finalizedDailyRate: ''\n      };\n    }\n\n    if (props.projectDetail.projectType === \"OfficeWork\") {\n      param = {\n        projectId: props.projectDetail.projectId,\n        projectContractId: props.contractDetail.projectContractId,\n        finalizedHourlyRate: '',\n        finalizedHourOfWeek: '',\n        finalizedMilestoneAmount: '',\n        finalizedDailyRate: contractStats.dailyRate\n      };\n    }\n\n    setLoading(true);\n    let result = await request(`${ENDPOINT[\"UpdateContractCondition\"]}`, postOptions(param));\n\n    if (result.success) {\n      notifications.showSuccess(\"Contract updated successfully\");\n      let contractDetailNew = props.contractDetail;\n      contractDetailNew.finalizedHourlyRate = contractStats.rate;\n      contractDetailNew.finalizedDailyRate = contractStats.dailyRate;\n      contractDetailNew.finalizedHourOfWeek = contractStats.weekLimit;\n      contractDetailNew.finalizedMilestoneAmount = contractStats.milestoneAmount;\n      contractDetailNew.allowManualTimeLog = isManualTimeAllow;\n\n      if (props.projectDetail.projectType === \"Hourly\") {\n        props.history.push({\n          pathname: '/hourly-contract-detail-client',\n          state: contractDetailNew\n        });\n      }\n\n      if (props.projectDetail.projectType === \"OfficeWork\") {\n        props.history.push({\n          pathname: '/office-contract-detail-client',\n          state: contractDetailNew\n        });\n      }\n\n      if (props.projectDetail.projectType === \"FreeContract\") {\n        props.history.push({\n          pathname: '/free-contract-detail-client',\n          state: contractDetailNew\n        });\n      }\n\n      if (props.projectDetail.projectType === \"Milestone\") {\n        props.history.push({\n          pathname: '/milestone-contract-detail-client',\n          state: contractDetailNew\n        });\n      }\n\n      getContractHistory();\n      setLoading(false);\n      setIsSavedFlag(true);\n    } else {\n      setLoading(false);\n      notifications.showError(\"Some Error occurred please try again later\");\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: wrapperRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contract-detail-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 5\n    }\n  }, props.contractDetail.project && /*#__PURE__*/React.createElement(MyProjectsCards, Object.assign({\n    contractData: props.contractDetail,\n    type: ((_props$contractDetail9 = props.contractDetail.project) === null || _props$contractDetail9 === void 0 ? void 0 : _props$contractDetail9.projectType) || \"hourly\",\n    completed: ((_props$contractDetail10 = props.contractDetail) === null || _props$contractDetail10 === void 0 ? void 0 : _props$contractDetail10.projectContractStatus) === \"OnHold\" ? \"stopped\" : ((_props$contractDetail11 = props.contractDetail) === null || _props$contractDetail11 === void 0 ? void 0 : _props$contractDetail11.projectContractStatus) === \"Contract_Ended\" ? \"completed\" : ((_props$contractDetail12 = props.contractDetail.project) === null || _props$contractDetail12 === void 0 ? void 0 : _props$contractDetail12.projectType) === \"Contest\" && !props.contractDetail.userProfile ? \"InWaiting\" : \"in-progress\",\n    status: props.contractDetail.projectContractStatus === \"OnHold\" ? \"OnHold\" : props.contractDetail.projectContractStatus === \"Contract_Ended\" ? \"Closed\" : props.contractDetail.projectContractStatus\n  }, props, {\n    isDisableRight: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 47\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hourly_limit post_form hourly_report\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position_rel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"viewDetail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"plus_btn\",\n    \"aria-expanded\": isContractDetailSectionExpanded,\n    onClick: () => onExpansionChange(\"isContractDetailSectionExpanded\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 15\n    }\n  }, \"+\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: isContractDetailSectionExpanded ? \"collapse show\" : \"collapse\",\n    id: \"collapseExample4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    hidden: true,\n    className: \"work_date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    title: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-angle-left\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 13\n    }\n  }, moment(props.projectDetail.postDateTime).format(\"dddd, MMM D, YYYY\")), /*#__PURE__*/React.createElement(\"a\", {\n    title: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-angle-right\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      pointerEvents: ((_props$contractDetail13 = props.contractDetail) === null || _props$contractDetail13 === void 0 ? void 0 : _props$contractDetail13.projectContractStatus) === \"OnHold\" || ((_props$contractDetail14 = props.contractDetail) === null || _props$contractDetail14 === void 0 ? void 0 : _props$contractDetail14.projectContractStatus) === \"Completed\" ? 'none' : ''\n    },\n    className: \"hourly_rate basic_font\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 15\n    }\n  }, props.projectDetail.projectType != \"OfficeWork\" && props.projectDetail.projectType != \"Milestone\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 121\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"green_text feedbk_lbl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 19\n    }\n  }, \"Hourly Rate:\"), isRateEditable ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rate_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"rate\",\n    id: \"hourly-rate-update\",\n    value: contractStats.rate,\n    autoFocus: true,\n    className: \"rate_box_select form-control border-0 py-0 font-weight-bold\",\n    onChange: e => {\n      onTextHandleChange(e, \"rate\");\n      setIsSavedFlag(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 23\n    }\n  })) : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rate_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 21\n    }\n  }, \"$\", contractStats.rate), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 19\n    }\n  }, \"Per Hour\"), /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-pencil\",\n    \"aria-hidden\": \"true\",\n    onClick: () => onEditIconClick(\"isRateEditable\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 19\n    }\n  })), props.projectDetail.projectType != \"Hourly\" && props.projectDetail.projectType != \"Milestone\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"green_text feedbk_lbl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 21\n    }\n  }, \"Daily Rate:\"), isDailyRateEditable ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rate_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"dailyRate\",\n    autoFocus: true,\n    value: contractStats.dailyRate,\n    className: \"rate_box_select form-control border-0 py-0 font-weight-bold\",\n    onChange: e => {\n      onTextHandleChange(e, \"dailyRate\");\n      setIsSavedFlag(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 25\n    }\n  })) : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rate_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 23\n    }\n  }, \"$\", contractStats.dailyRate), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 21\n    }\n  }, \"Per day\"), /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-pencil\",\n    \"aria-hidden\": \"true\",\n    onClick: () => onEditIconClick(\"isDailyRateEditable\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 21\n    }\n  })), (props.projectDetail.projectType === \"FreeContract\" || props.projectDetail.projectType === \"Hourly\") && props.projectDetail.projectType != \"Milestone\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"green_text feedbk_lbl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 23\n    }\n  }, \"Weekly Limit :\"), isWeekLimitEditable ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rate_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    autoFocus: true,\n    name: \"weekLimit\",\n    value: contractStats.weekLimit,\n    className: \"rate_box_select form-control border-0 py-0 font-weight-bold\",\n    onChange: e => {\n      onTextHandleChange(e, \"weekLimit\");\n      setIsSavedFlag(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 27\n    }\n  })) : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rate_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 25\n    }\n  }, contractStats.weekLimit), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 23\n    }\n  }, \"Per Week\"), /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-pencil\",\n    \"aria-hidden\": \"true\",\n    onClick: () => onEditIconClick(\"isWeekLimitEditable\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 23\n    }\n  })), props.projectDetail.projectType === \"Milestone\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"green_text feedbk_lbl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 21\n    }\n  }, \"Milestone amount:\"), isMilestoneAmountEditable ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rate_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"weekLimit\",\n    autoFocus: true,\n    value: contractStats.milestoneAmount,\n    className: \"rate_box_select form-control border-0 py-0 font-weight-bold\",\n    onChange: e => {\n      setIsSavedFlag(false);\n      onTextHandleChange(e, \"milestoneAmount\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 25\n    }\n  })) : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rate_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 23\n    }\n  }, \"US$ \", contractStats.milestoneAmount), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 21\n    }\n  }, \" \"), /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-pencil\",\n    \"aria-hidden\": \"true\",\n    onClick: () => setIsMilestoneAmountEditable(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 21\n    }\n  })), props.projectDetail.projectType != \"Milestone\" && props.projectDetail.projectType != \"OfficeWork\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 120\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"green_text feedbk_lbl feedbk_lbl_manualTimeMobile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-question-circle\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 23\n    }\n  }), \"Manual Time :\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"rate_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    name: \"manualTime\",\n    className: \"rate_box_select form-control border-0 py-0 font-weight-bold\",\n    style: {\n      padding: \".375rem 0.55rem\"\n    },\n    value: isManualTimeAllow,\n    onChange: e => {\n      setIsManualTimeAllow(e.target.value === \"true\");\n      setIsSavedFlag(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 25\n    }\n  }, \"Allowed\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 25\n    }\n  }, \"Disallowed\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"green_text feedbk_lbl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 19\n    }\n  }, \"Start Date:\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 19\n    }\n  }, moment(props.contractDetail.contractCreatedDateTime).format(\"D MMM YYYY\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"green_text feedbk_lbl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 19\n    }\n  }, \"Hired By :\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 19\n    }\n  }, ((_user$clientAuth = user.clientAuth) === null || _user$clientAuth === void 0 ? void 0 : _user$clientAuth.firstName) + \" \" + ((_user$clientAuth2 = user.clientAuth) === null || _user$clientAuth2 === void 0 ? void 0 : _user$clientAuth2.lastName) || \"Sonny Cho\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"green_text feedbk_lbl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 19\n    }\n  }, \"Contract ID:\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 19\n    }\n  }, props.contractDetail.contractCode || \"00000000000\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"save_cancel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    disabled: loading || ((_props$contractDetail15 = props.contractDetail) === null || _props$contractDetail15 === void 0 ? void 0 : _props$contractDetail15.projectContractStatus) === \"Completed\",\n    className: \"btn save_btn\",\n    onClick: () => saveChangesContract(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 19\n    }\n  }, \"Save Changes\", \" \", loading ? /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 32\n    }\n  }) : \"\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"work_detail contract_detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 13\n    }\n  }, \"View History of Contract Changes\"), /*#__PURE__*/React.createElement(Skeleton, {\n    count: 2,\n    isSkeletonLoading: contractHistoryLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    hidden: contractHistoryLoading,\n    className: \"contract_tbl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 515,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-responsive detail_tbl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 15\n    }\n  }, contractHistoryData.length > 0 ? /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 522,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 27\n    }\n  }, \"Date Time\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 528,\n      columnNumber: 27\n    }\n  }, \"Description\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 23\n    }\n  }, contractHistoryData.map((item, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 31\n    }\n  }, moment(item.createDateTime).format(\"DD MMM YYYY\")), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 31\n    }\n  }, item.description))))) : /*#__PURE__*/React.createElement(NoDataAvailable, Object.assign({\n    title: \"Contract history not exist yet\",\n    buttonText: \"View your other contracts\",\n    path: \"/my-contracts\",\n    color: \"#0d2146\"\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 21\n    }\n  }))), (contractHistoryData === null || contractHistoryData === void 0 ? void 0 : contractHistoryData.length) > 0 && /*#__PURE__*/React.createElement(Pagination, {\n    isPreviousPage: pagination.pageNumber > 1 ? true : false,\n    isNextPage: pagination.pageNumber * pagination.pageSize < pagination.total ? true : false,\n    lastPkEvaluatedTrack: contractHistoryData,\n    pageNumber: pagination.pageNumber,\n    moveBack: () => getContractHistory(\"prev\"),\n    moveNext: () => getContractHistory(\"next\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 17\n    }\n  }))))), /*#__PURE__*/React.createElement(Modal, {\n    dialogClassName: \"jungle-modal\",\n    contentClassName: \"jungle-modal-content-notify\",\n    size: \"small\",\n    show: open,\n    onHide: () => setOpen(false),\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 581,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => setOpen(false),\n    className: \"custom-close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 13\n    }\n  }, \"x\"), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"notify-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 10\n    }\n  }, \"You did not change your update, \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 593,\n      columnNumber: 42\n    }\n  }), \"Are you sure leaving without saving it?\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"notify-button-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 597,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      setOpen(false);\n      setIsSavedFlag(true);\n    },\n    startIcon: /*#__PURE__*/React.createElement(CancelPresentationIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 81\n      }\n    }),\n    color: \"secondary\",\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 598,\n      columnNumber: 8\n    }\n  }, \"Discard\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      setOpen(false);\n      setIsSavedFlag(false);\n    },\n    startIcon: /*#__PURE__*/React.createElement(AssignmentTurnedInIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 83\n      }\n    }),\n    color: \"primary\",\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 599,\n      columnNumber: 10\n    }\n  }, \"Save changes first\"))))));\n}\n\nexport default ContractDetail;","map":{"version":3,"sources":["/var/www/php74/bearolefrontend/src/container/client/contractDetail/sharedComponents/contractDetail.js"],"names":["React","useEffect","useState","useRef","Format","UserView","moment","useSelector","request","ENDPOINT","getOptions","postOptions","Skeleton","Pagination","notifications","NoDataAvailable","MyProjectsCards","Modal","AssignmentTurnedInIcon","CancelPresentationIcon","Button","ContractDetail","props","unpaidAmount","setUnpaidAmount","isContractDetailSectionExpanded","setIsContractDetailSectionExpanded","contractStats","setContractStats","rate","contractDetail","finalizedHourlyRate","weekLimit","finalizedHourOfWeek","dailyRate","projectDetail","projectType","finalizedSalarayAmount","finalizedDailyRate","milestoneAmount","finalizedMilestoneAmount","isRateEditable","setIsRateEditable","isDailyRateEditable","setIsDailyRateEditable","isWeekLimitEditable","setIsWeekLimitEditable","isMilestoneAmountEditable","setIsMilestoneAmountEditable","isManualTimeAllow","setIsManualTimeAllow","projectHistory","setProjectHistory","open","setOpen","isSavedFlag","setIsSavedFlag","loading","setLoading","pagination","setPagination","pageSize","pageNumber","total","contractHistoryData","setContractHistoryData","contractHistoryLoading","setContractHistoryLoading","wrapperRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","user","state","authReducer","onExpansionChange","projectContractId","getContractHistory","onEditIconClick","name","getElementsByName","focus","onTextHandleChange","e","type","value","move","userId","userProfile","projectId","result","success","entries","pageNumer","saveChangesContract","param","allowManualTimeLog","showSuccess","contractDetailNew","history","push","pathname","showError","project","projectContractStatus","postDateTime","format","pointerEvents","padding","contractCreatedDateTime","clientAuth","firstName","lastName","contractCode","length","map","item","index","createDateTime","description"],"mappings":"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","sourcesContent":["import React, { useEffect, useState,useRef } from \"react\";\nimport \"../contractDetail.scss\";\nimport Format from \"../../../../components/numberFormat\";\nimport { UserView } from \"../../../../components/freelancer/userView\";\nimport moment from \"moment\";\nimport { useSelector } from \"react-redux\";\nimport 'react-notify-alert/dist/index.css'\nimport request from \"../../../../utils/request\";\nimport { ENDPOINT } from \"../../../../utils/endpoint\";\nimport { getOptions, postOptions } from \"../../../../utils/httpConfig\";\nimport Skeleton from \"../../../../components/skeleton/skeleton\";\nimport Pagination from \"../../../../components/pagination\";\nimport notifications from \"../../../../utils/notifications\";\nimport NoDataAvailable from \"../../../../shared/error/not-data-available-new\";\nimport MyProjectsCards from \"../../../../components/project/MyprojectsCards/myprojectsCards\";\nimport Modal from \"react-bootstrap/Modal\";\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\nimport CancelPresentationIcon from '@material-ui/icons/CancelPresentation';\nimport Button from '@material-ui/core/Button';\nfunction ContractDetail(props) {\n  const [unpaidAmount, setUnpaidAmount] = useState(0.0);\n  const [isContractDetailSectionExpanded, setIsContractDetailSectionExpanded] =\n    useState(true);\n  const [contractStats, setContractStats] = useState({\n    rate: props.contractDetail?.finalizedHourlyRate\n      ? props.contractDetail?.finalizedHourlyRate\n      : 0,\n    weekLimit: props.contractDetail?.finalizedHourOfWeek\n      ? props.contractDetail?.finalizedHourOfWeek\n      : 0,\n    dailyRate: props.projectDetail.projectType === \"OfficeWork\" && props.contractDetail?.finalizedSalarayAmount\n      ? props.contractDetail?.finalizedSalarayAmount\n      : props.contractDetail.finalizedDailyRate ? props.contractDetail.finalizedDailyRate : 0,\n    milestoneAmount: props.contractDetail.finalizedMilestoneAmount ? props.contractDetail.finalizedMilestoneAmount : '0'\n  });\n  const [isRateEditable, setIsRateEditable] = useState(false);\n  const [isDailyRateEditable, setIsDailyRateEditable] = useState(false);\n  const [isWeekLimitEditable, setIsWeekLimitEditable] = useState(false);\n  const [isMilestoneAmountEditable, setIsMilestoneAmountEditable] = useState(false);\n  const [isManualTimeAllow, setIsManualTimeAllow] = useState(true);\n  const [projectHistory, setProjectHistory] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [isSavedFlag,setIsSavedFlag] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const [pagination, setPagination] = useState({\n    pageSize: 10,\n    pageNumber: 1,\n    total: 10,\n  });\n  const [contractHistoryData, setContractHistoryData] = useState([])\n  const [contractHistoryLoading, setContractHistoryLoading] = useState(false);\n  const wrapperRef = useRef(null);\n    useEffect(() => {\n\n      function handleClickOutside(event) {\n          if (wrapperRef.current && !wrapperRef.current.contains(event.target)) {\n              setOpen(true)\n           \n          }\n        }\n      // Bind the event listener\n      if(!isSavedFlag){\n        document.addEventListener(\"mousedown\", handleClickOutside);\n      }else{\n        \n        return () => {\n          // Unbind the event listener on clean up\n          document.removeEventListener(\"mousedown\", handleClickOutside);\n      };\n      }\n      return () => {\n        // Unbind the event listener on clean up\n        document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n\n  }, [wrapperRef,isSavedFlag]);\n  const user = useSelector((state) => state.authReducer);\n\n  const onExpansionChange = () => {\n    setIsContractDetailSectionExpanded(!isContractDetailSectionExpanded);\n  };\n\n  useEffect(() => {\n    if (props.contractDetail.projectContractId) {\n      setContractStats({\n        ...contractStats, milestoneAmount: props.contractDetail.finalizedMilestoneAmount,\n        dailyRate: props.projectDetail.projectType === \"OfficeWork\" && props.contractDetail?.finalizedSalarayAmount\n          ? props.contractDetail?.finalizedSalarayAmount\n          : props.contractDetail.finalizedDailyRate ? props.contractDetail.finalizedDailyRate : 0,\n        rate: props.contractDetail.finalizedHourlyRate,\n        weekLimit: props.contractDetail.finalizedHourOfWeek,\n      })\n    }\n    if (props.contractDetail.projectContractId) {\n      getContractHistory()\n    }\n  }, [props.contractDetail])\n\n  const onEditIconClick = (name) => {\n    if (name === \"isRateEditable\") {\n      document.getElementsByName(\"rate\")[0] &&\n        document.getElementsByName(\"rate\")[0].focus();\n      setIsRateEditable(!isRateEditable);\n      setIsDailyRateEditable(false);\n    } else if (name === \"isDailyRateEditable\") {\n      document.getElementsByName(\"dailyRate\")[0] &&\n        document.getElementsByName(\"dailyRate\")[0].focus();\n      setIsDailyRateEditable(!isRateEditable);\n      setIsRateEditable(false);\n    } else if (name === \"isWeekLimitEditable\") {\n      document.getElementsByName(\"weekLimit\")[0] &&\n        document.getElementsByName(\"weekLimit\")[0].focus();\n      setIsWeekLimitEditable(!isWeekLimitEditable);\n    }\n  };\n  const onTextHandleChange = (e, type) => {\n    if (type === \"weekLimit\") {\n      setContractStats({ ...contractStats, weekLimit: e.target.value });\n    } else {\n      setContractStats({ ...contractStats, [type]: e.target.value });\n    }\n  };\n\n\n  const getContractHistory = async (move) => {\n    let userId = props.userProfile?.userId;\n    let projectContractId = props.contractDetail.projectContractId;\n    let projectId = props.projectDetail.projectId;\n    let pageNumber = pagination.pageNumber;\n    setContractHistoryLoading(true)\n    if (move === \"next\") {\n      setPagination({\n        ...pagination, pageNumber: pagination.pageNumber + 1\n      })\n      pageNumber = pageNumber + 1;\n    } else if (move === \"prev\") {\n      setPagination({\n        ...pagination, pageNumber: pagination.pageNumber - 1\n      })\n      pageNumber = pageNumber - 1;\n    }\n    let result = await request(\n      `${ENDPOINT[\"GetProjectContractHistory\"]\n      }?projectContractId=${projectContractId}&userId=${userId}&projectId=${projectId}&pageNumber=${pageNumber}&pageSize=${pagination.pageSize}`,\n      getOptions({})\n    );\n    if (result.success) {\n      setContractHistoryData(result.result.entries);\n      setPagination({\n        pageNumber: result.result.pageNumber || result.result.pageNumer,\n        pageSize: result.result.pageSize,\n        total: result.result.total,\n      });\n      setContractHistoryLoading(false)\n    } else { }\n    setContractHistoryLoading(false)\n  }\n\n\n  const saveChangesContract = async () => {\n\n    let param\n    if (props.projectDetail.projectType === \"Hourly\") {\n      param = {\n        projectId: props.projectDetail.projectId,\n        projectContractId: props.contractDetail.projectContractId,\n        finalizedHourlyRate: contractStats.rate,\n        finalizedHourOfWeek: contractStats.weekLimit,\n        allowManualTimeLog: isManualTimeAllow,\n        finalizedMilestoneAmount: '',\n        finalizedDailyRate: ''\n      };\n    }\n\n    if (props.projectDetail.projectType === \"FreeContract\") {\n      param = {\n        projectId: props.projectDetail.projectId,\n        projectContractId: props.contractDetail.projectContractId,\n        finalizedHourlyRate: contractStats.rate,\n        finalizedHourOfWeek: contractStats.weekLimit,\n        allowManualTimeLog: isManualTimeAllow,\n        finalizedMilestoneAmount: '',\n        finalizedDailyRate: contractStats.dailyRate\n      };\n    }\n\n    if (props.projectDetail.projectType === \"Milestone\") {\n      param = {\n        projectId: props.projectDetail.projectId,\n        projectContractId: props.contractDetail.projectContractId,\n        finalizedHourlyRate: '',\n        finalizedHourOfWeek: '',\n        finalizedMilestoneAmount: contractStats.milestoneAmount,\n        finalizedDailyRate: ''\n      };\n    }\n\n\n    if (props.projectDetail.projectType === \"OfficeWork\") {\n      param = {\n        projectId: props.projectDetail.projectId,\n        projectContractId: props.contractDetail.projectContractId,\n        finalizedHourlyRate: '',\n        finalizedHourOfWeek: '',\n        finalizedMilestoneAmount: '',\n        finalizedDailyRate: contractStats.dailyRate\n      };\n    }\n\n    setLoading(true);\n\n    let result = await request(\n      `${ENDPOINT[\"UpdateContractCondition\"]}`,\n      postOptions(param)\n    );\n    if (result.success) {\n      notifications.showSuccess(\"Contract updated successfully\")\n      let contractDetailNew = props.contractDetail;\n      contractDetailNew.finalizedHourlyRate = contractStats.rate;\n      contractDetailNew.finalizedDailyRate = contractStats.dailyRate;\n      contractDetailNew.finalizedHourOfWeek = contractStats.weekLimit;\n      contractDetailNew.finalizedMilestoneAmount = contractStats.milestoneAmount\n      contractDetailNew.allowManualTimeLog = isManualTimeAllow;\n      if (props.projectDetail.projectType === \"Hourly\") {\n        props.history.push({\n          pathname: '/hourly-contract-detail-client',\n          state: contractDetailNew\n        })\n      }\n      if (props.projectDetail.projectType === \"OfficeWork\") {\n        props.history.push({\n          pathname: '/office-contract-detail-client',\n          state: contractDetailNew\n        })\n      }\n      if (props.projectDetail.projectType === \"FreeContract\") {\n        props.history.push({\n          pathname: '/free-contract-detail-client',\n          state: contractDetailNew\n        })\n      }\n      if (props.projectDetail.projectType === \"Milestone\") {\n        props.history.push({\n          pathname: '/milestone-contract-detail-client',\n          state: contractDetailNew\n        })\n      }\n      getContractHistory()\n\n      setLoading(false);\n      setIsSavedFlag(true)\n    } else {\n      setLoading(false)\n      notifications.showError(\"Some Error occurred please try again later\")\n    }\n  };\n  return (\n    <div ref={wrapperRef}>\n      {/* may be we will use this part later */}\n      {/* <UserView\n        projectDetail={props.projectDetail}\n        // handlePauseContract={this.handlePauseContract}\n        unpaidAmount={\n          <Format\n            number={unpaidAmount}\n            currency={props.projectDetail.currencyCode}\n          />\n        }\n        contractDetail={props.contractDetail}\n        timeAndPaymentsTab={true}\n        userProfile={props?.userProfile}\n        {...props}\n      /> */}\n    <div className=\"contract-detail-card\">\n    {\n        props.contractDetail.project &&       <MyProjectsCards\n        contractData={props.contractDetail}\n        type={props.contractDetail.project?.projectType || \"hourly\"}\n        completed={\n          props.contractDetail?.projectContractStatus === \"OnHold\"\n            ? \"stopped\"\n            : props.contractDetail?.projectContractStatus === \"Contract_Ended\"?\"completed\": props.contractDetail.project?.projectType===\"Contest\" && !props.contractDetail.userProfile ? \"InWaiting\":\"in-progress\"\n        }\n        status={\n          props.contractDetail.projectContractStatus === \"OnHold\"\n            ? \"OnHold\"\n            : props.contractDetail.projectContractStatus === \"Contract_Ended\"?\"Closed\": props.contractDetail.projectContractStatus\n        }\n        {...props}\n        isDisableRight={true}\n      />\n      }\n    </div>\n \n      <div className=\"hourly_limit post_form hourly_report\">\n        <div className=\"position_rel\">\n          <h4>\n            <span className=\"viewDetail\">\n              <a\n                className=\"plus_btn\"\n                aria-expanded={isContractDetailSectionExpanded}\n                onClick={() =>\n                  onExpansionChange(\"isContractDetailSectionExpanded\")\n                }\n              >\n                +\n              </a>\n            </span>\n          </h4>\n        </div>\n        <div\n          className={\n            isContractDetailSectionExpanded ? \"collapse show\" : \"collapse\"\n          }\n          id=\"collapseExample4\"\n        >\n          <div hidden={true} className=\"work_date\">\n            <a title=\"\">\n              <i className=\"fa fa-angle-left\" aria-hidden=\"true\" />\n            </a>\n            <span>\n              {moment(props.projectDetail.postDateTime).format(\n                \"dddd, MMM D, YYYY\"\n              )}\n            </span>\n            <a title=\"\">\n              <i className=\"fa fa-angle-right\" aria-hidden=\"true\" />\n            </a>\n          </div>\n          <div style={{pointerEvents:props.contractDetail?.projectContractStatus === \"OnHold\" || props.contractDetail?.projectContractStatus === \"Completed\"?'none':''}} className=\"hourly_rate basic_font\">\n            <div className=\"row align-items-end\">\n              <div className=\"col-md-8\">\n                {(props.projectDetail.projectType != \"OfficeWork\" && props.projectDetail.projectType != \"Milestone\") && <div className=\"d-flex align-items-center\">\n                  <label className=\"green_text feedbk_lbl\">Hourly Rate:</label>\n                  {isRateEditable ? (\n                    <span className=\"rate_box\">\n                      <input\n                        type=\"text\"\n                        name=\"rate\"\n                        id=\"hourly-rate-update\"\n                        value={contractStats.rate}\n                        autoFocus\n                        className=\"rate_box_select form-control border-0 py-0 font-weight-bold\"\n                        onChange={(e) => {onTextHandleChange(e, \"rate\");\n                        setIsSavedFlag(false);}\n                     \n                      }\n                      />\n                    </span>\n                  ) : (\n                    <span className=\"rate_box\">${contractStats.rate}</span>\n                  )}\n                  <span>Per Hour</span>\n                  <i\n                    className=\"fa fa-pencil\"\n                    aria-hidden=\"true\"\n                    onClick={() => onEditIconClick(\"isRateEditable\")}\n                  />\n                </div>}\n\n                {\n                  (props.projectDetail.projectType != \"Hourly\" && props.projectDetail.projectType != \"Milestone\") &&\n                  <div className=\"d-flex align-items-center\">\n                    <label className=\"green_text feedbk_lbl\">Daily Rate:</label>\n                    {isDailyRateEditable ? (\n                      <span className=\"rate_box\">\n                        <input\n                          type=\"text\"\n                          name=\"dailyRate\"\n                          autoFocus\n                          value={contractStats.dailyRate}\n                          className=\"rate_box_select form-control border-0 py-0 font-weight-bold\"\n                          onChange={(e) => {onTextHandleChange(e, \"dailyRate\");setIsSavedFlag(false)}}\n                        />\n                      </span>\n                    ) : (\n                      <span className=\"rate_box\">\n                        ${contractStats.dailyRate}\n                      </span>\n                    )}\n                    <span>Per day</span>\n                    <i\n                      className=\"fa fa-pencil\"\n                      aria-hidden=\"true\"\n                      onClick={() => onEditIconClick(\"isDailyRateEditable\")}\n                    />\n                  </div>\n                }\n\n\n                {((props.projectDetail.projectType === \"FreeContract\" ||\n                  props.projectDetail.projectType === \"Hourly\") && props.projectDetail.projectType != \"Milestone\") && (\n                    <div className=\"d-flex align-items-center\">\n                      <label className=\"green_text feedbk_lbl\">\n                        Weekly Limit :\n                      </label>\n                      {isWeekLimitEditable ? (\n                        <span className=\"rate_box\">\n                          <input\n                            type=\"text\"\n                            autoFocus\n                            name=\"weekLimit\"\n                            value={contractStats.weekLimit}\n                            className=\"rate_box_select form-control border-0 py-0 font-weight-bold\"\n                            onChange={(e) => {onTextHandleChange(e, \"weekLimit\");setIsSavedFlag(false)}}\n                          />\n                        </span>\n                      ) : (\n                        <span className=\"rate_box\">\n                          {contractStats.weekLimit}\n                        </span>\n                      )}\n                      <span>Per Week</span>\n                      <i\n                        className=\"fa fa-pencil\"\n                        aria-hidden=\"true\"\n                        onClick={() => onEditIconClick(\"isWeekLimitEditable\")}\n                      />\n                    </div>\n                  )}\n                {props.projectDetail.projectType === \"Milestone\" && (\n                  <div className=\"d-flex align-items-center\">\n                    <label className=\"green_text feedbk_lbl\">\n                      Milestone amount:\n                    </label>\n                    {isMilestoneAmountEditable ? (\n                      <span className=\"rate_box\">\n                        <input\n                          type=\"text\"\n                          name=\"weekLimit\"\n                          autoFocus\n                          value={contractStats.milestoneAmount}\n                          className=\"rate_box_select form-control border-0 py-0 font-weight-bold\"\n                          onChange={(e) =>{setIsSavedFlag(false);onTextHandleChange(e, \"milestoneAmount\")} }\n                        />\n                      </span>\n                    ) : (\n                      <span className=\"rate_box\">\n                        US$ {contractStats.milestoneAmount}\n                      </span>\n                    )}\n                    <span>{\" \"}</span>\n                    <i\n                      className=\"fa fa-pencil\"\n                      aria-hidden=\"true\"\n                      onClick={() => setIsMilestoneAmountEditable(true)}\n                    />\n                  </div>\n                )}\n                {\n                  props.projectDetail.projectType != \"Milestone\" && props.projectDetail.projectType != \"OfficeWork\" && <div className=\"d-flex align-items-center\">\n                    <label className=\"green_text feedbk_lbl feedbk_lbl_manualTimeMobile\">\n                      <i className=\"fa fa-question-circle\" aria-hidden=\"true\" />\n                      Manual Time :\n                    </label>\n                    {/* <span className=\"rate_box\">Allowed</span> */}\n                    <span className=\"rate_box\">\n                      <select\n                        name=\"manualTime\"\n                        className=\"rate_box_select form-control border-0 py-0 font-weight-bold\"\n                        style={{ padding: \".375rem 0.55rem\" }}\n                        value={isManualTimeAllow}\n                        onChange={(e) => {\n                          setIsManualTimeAllow(e.target.value === \"true\");\n                          setIsSavedFlag(false)\n                        }}\n                      >\n                        <option value={true}>Allowed</option>\n                        <option value={false}>Disallowed</option>\n                      </select>\n                    </span>\n                  </div>\n                }\n\n                <div className=\"d-flex align-items-center\">\n                  <label className=\"green_text feedbk_lbl\">Start Date:</label>\n                  <span>\n                    {moment(\n                      props.contractDetail.contractCreatedDateTime\n                    ).format(\"D MMM YYYY\")}\n                  </span>\n                </div>\n                <div className=\"d-flex align-items-center\">\n                  <label className=\"green_text feedbk_lbl\">Hired By :</label>\n                  <span>{(user.clientAuth?.firstName + \" \" + user.clientAuth?.lastName) || \"Sonny Cho\"}</span>\n                </div>\n                <div className=\"d-flex align-items-center\">\n                  <label className=\"green_text feedbk_lbl\">Contract ID:</label>\n                  <span>\n                    {props.contractDetail.contractCode || \"00000000000\"}\n                  </span>\n                </div>\n              </div>\n              <div className=\"col-md-4\">\n                <div className=\"save_cancel\">\n                  <button\n                    type=\"button\"\n                    disabled={loading || props.contractDetail?.projectContractStatus === \"Completed\"}\n                    className=\"btn save_btn\"\n                    onClick={() => saveChangesContract()}\n                  >\n                    Save Changes{\" \"}\n                    {loading ? <i className=\"fa fa-spinner fa-spin\"></i> : \"\"}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"work_detail contract_detail\">\n            <h5>View History of Contract Changes</h5>\n            <Skeleton\n              count={2}\n              isSkeletonLoading={contractHistoryLoading}\n            />\n            <div hidden={contractHistoryLoading} className=\"contract_tbl\">\n              <div className=\"table-responsive detail_tbl\">\n                {\n                  contractHistoryData.length > 0 ?\n                    <table\n                      className=\"table text-center\"\n                    >\n                      <thead>\n\n                        <tr>\n                          <th scope=\"col\" className=\"text-left\">\n                            Date Time\n                          </th>\n                          <th scope=\"col\" className=\"text-left\">\n                            Description\n                          </th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {\n                          contractHistoryData.map((item, index) => (\n                            <tr key={index} >\n                              <td className=\"text-left\">\n                                {moment(item.createDateTime).format(\"DD MMM YYYY\")}\n                              </td>\n                              <td className=\"text-left\">\n                                {item.description}\n                              </td>\n                            </tr>\n                          ))\n                        }\n\n                      </tbody>\n                    </table> :\n                    <NoDataAvailable\n                      title=\"Contract history not exist yet\"\n                      buttonText=\"View your other contracts\"\n                      path=\"/my-contracts\"\n                      color={\"#0d2146\"}\n                      {...props}\n                    />\n                }\n              </div>\n              {contractHistoryData?.length > 0 && (\n                <Pagination\n                  isPreviousPage={pagination.pageNumber > 1 ? true : false}\n                  isNextPage={\n                    pagination.pageNumber * pagination.pageSize <\n                      pagination.total\n                      ? true\n                      : false\n                  }\n                  lastPkEvaluatedTrack={contractHistoryData}\n                  pageNumber={pagination.pageNumber}\n                  moveBack={() =>\n                    getContractHistory(\"prev\")\n                  }\n                  moveNext={() =>\n                    getContractHistory(\"next\")\n                  }\n                />\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n      <Modal\n            dialogClassName=\"jungle-modal\"\n            contentClassName=\"jungle-modal-content-notify\"\n            size=\"small\"\n           show={open} onHide={()=>setOpen(false)} centered>\n            <span onClick={()=>setOpen(false)} className=\"custom-close\">\n                x\n              </span>\n             \n        <Modal.Body>\n          <div className=\"notify-modal\">\n         <h6>\n         You did not change your update, <br />\n\nAre you sure leaving without saving it?\n         </h6>\n       <div className=\"notify-button-modal\">\n       <Button onClick={()=>{setOpen(false) ;setIsSavedFlag(true)}}  startIcon={<CancelPresentationIcon />}  color=\"secondary\"  variant=\"outlined\">Discard</Button>\n         <Button onClick={()=>{setOpen(false) ;setIsSavedFlag(false)}} startIcon={<AssignmentTurnedInIcon />} color=\"primary\" variant=\"outlined\">Save changes first</Button>\n       </div>\n          </div>\n</Modal.Body>\n       \n      </Modal>\n    </div>\n  );\n}\n\nexport default ContractDetail;\n"]},"metadata":{},"sourceType":"module"}