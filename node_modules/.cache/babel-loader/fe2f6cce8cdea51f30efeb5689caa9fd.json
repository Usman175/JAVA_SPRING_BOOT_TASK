{"ast":null,"code":"var _jsxFileName = \"/var/www/php74/bearolefrontend/src/container/project/projectProposals/postProjectProposal.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport moment from \"moment\";\nimport { CKEditor } from \"@ckeditor/ckeditor5-react\";\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\nimport ShowMoreText from \"react-show-more-text\";\nimport { onReduxRouteChange } from \"../../../store/action/action\";\nimport request from \"../../../utils/request\";\nimport { ENDPOINT } from \"../../../utils/endpoint\";\nimport { ProjectTypeConst, ProjectType } from \"../../../utils/projectConst\";\nimport { getOptions, postOptions } from \"../../../utils/httpConfig\";\nimport RightTop from \"../../../components/rightbar/rightTop\";\nimport RightBottom from \"../../../components/rightbar/rightBottom\";\nimport Skeleton from \"../../../components/skeleton/skeleton\";\nimport \"../projectDetails/projectDetail.scss\";\nimport \"./postProjectProposal.scss\";\nimport Label from \"../../../components/customLabel/label\";\nimport Milestone from \"./projectProposalDetails/proposalCompnents/milestone\";\nimport Hourly from \"./projectProposalDetails/proposalCompnents/hourly\";\nimport FreeContract from \"./projectProposalDetails/proposalCompnents/freeContract\";\nimport OfficeWork from \"./projectProposalDetails/proposalCompnents/officeWork\";\nimport ContestTypeProposal from \"./projectProposalDetails/proposalCompnents/constestType\";\nimport Currency from \"../../../components/currency\";\nimport Format from \"../../../components/numberFormat\";\nimport ProjectTypeBadge from \"../../../components/project/projectTypeBadge\";\nimport FormatDWH from \"../../../components/formatDWH\";\nimport ProjectCardbox from \"../allprojects/projectCardbox\";\nimport SubHeader from \"../../../components/subHeader\";\nimport notifications from \"../../../utils/notifications\";\nimport { uploadImage, deleteImage } from \"../../../services/uploadImages\";\nimport FileUploadLoader from \"../../../components/loader/fileUpload\";\n\nclass PostProjectProposal extends Component {\n  constructor(props) {\n    var _props$authUser, _props$authUser$freel, _props$authUser2, _props$authUser2$free, _props$authUser3, _props$authUser3$orga;\n\n    super(props);\n\n    this.getCompanyMembers = async () => {\n      let organizationId = this.state.userId;\n\n      if (organizationId) {\n        let result = await request(`${ENDPOINT[\"GetFreelancersByOrganization\"]}?organizationId=${organizationId}`, postOptions());\n\n        if (result.success) {\n          this.setState({\n            companyFreelancers: result.result\n          });\n        } else {\n          notifications.showWarning(\"Error while loading the freelancer against company\");\n        }\n      }\n    };\n\n    this.addClickMilestone = () => {\n      let array = this.state.milestoneList;\n      const maxMilestoneId = Math.max(...this.state.milestoneList.map(item => item.milestoneId));\n      array.push({\n        id: maxMilestoneId + 1,\n        milestoneDescription: \"\",\n        milestoneAmount: \"\",\n        milestoneDueDate: \"\"\n      });\n      this.setState({\n        milestoneList: array\n      });\n    };\n\n    this.removeClickMilestone = index => {\n      let array = this.state.milestoneList;\n\n      if (index !== -1) {\n        array.splice(index, 1);\n        this.setState({\n          milestoneList: array\n        });\n      }\n    };\n\n    this.onFormSubmitHandle = event => {\n      event.preventDefault();\n    };\n\n    this.handleInitialValidation = type => {\n      let {\n        languageType\n      } = this.props;\n      let errorMessage = {};\n      errorMessage[type] = languageType.REQUIRED_MESSAGE;\n      this.setState({\n        errorMessage: errorMessage\n      });\n    };\n\n    this.handleUpdateBasicInfo = (type, value) => {\n      let errMsg = this.state.errorMessage;\n      delete errMsg[type];\n      this.setState({\n        [type]: value,\n        errorMessage: errMsg\n      });\n    };\n\n    this.handleUploadImage = async file => {\n      this.setState({\n        uploading: true\n      });\n      let response = await uploadImage(file, \"photos\");\n\n      if (response.success) {\n        this.setState({\n          documents: [...this.state.documents, response.result.s3Key],\n          uploading: false\n        });\n      } else {\n        notifications.showError(response || \"Error uploading image.\");\n        this.setState({\n          uploading: false\n        });\n      }\n    };\n\n    this.handleDeleteImage = async (key, index) => {\n      let documentsAll = [...this.state.documents];\n      documentsAll.splice(index, 1);\n      this.setState({\n        documents: documentsAll\n      });\n\n      if (key.slice(0, 5) != \"https\") {\n        await deleteImage(key);\n      }\n    };\n\n    this.state = {\n      userId: ((_props$authUser = props.authUser) === null || _props$authUser === void 0 ? void 0 : (_props$authUser$freel = _props$authUser.freelancerAuth) === null || _props$authUser$freel === void 0 ? void 0 : _props$authUser$freel.individualFreelancerId) ? (_props$authUser2 = props.authUser) === null || _props$authUser2 === void 0 ? void 0 : (_props$authUser2$free = _props$authUser2.freelancerAuth) === null || _props$authUser2$free === void 0 ? void 0 : _props$authUser2$free.individualFreelancerId : (_props$authUser3 = props.authUser) === null || _props$authUser3 === void 0 ? void 0 : (_props$authUser3$orga = _props$authUser3.organizationAuth) === null || _props$authUser3$orga === void 0 ? void 0 : _props$authUser3$orga.organizationId,\n      projectId: new URLSearchParams(this.props.location.search).get(\"projectId\") !== null ? new URLSearchParams(this.props.location.search).get(\"projectId\") : \"\",\n      projectProposalId: new URLSearchParams(this.props.location.search).get(\"projectProposalId\") !== null ? new URLSearchParams(this.props.location.search).get(\"projectProposalId\") : \"\",\n      description: \"\",\n      coverLetter: \"\",\n      amount: \"\",\n      hourlyAmount: \"\",\n      expectedCompletionDays: \"\",\n      milestone: {\n        milestoneId: 1,\n        milestoneDescription: \"\",\n        milestoneAmount: \"\",\n        milestoneDueDate: \"\"\n      },\n      milestoneList: [],\n      screeningQuestionList: [],\n      isSkeletonLoading: false,\n      selectedProject: {},\n      errorMessage: {},\n      existingProposalData: {},\n      companyFreelancers: [],\n      documents: [],\n      uploading: false\n    };\n  }\n\n  componentWillMount() {\n    var _this$props$authUser, _this$props$authUser$;\n\n    this.bindProject();\n    this.state.milestoneList.push(this.state.milestone);\n\n    if ((_this$props$authUser = this.props.authUser) === null || _this$props$authUser === void 0 ? void 0 : (_this$props$authUser$ = _this$props$authUser.organizationAuth) === null || _this$props$authUser$ === void 0 ? void 0 : _this$props$authUser$.organizationId) {\n      this.getCompanyMembers();\n    }\n  }\n\n  //#region Bind Contest, Proposal Detail\n  async bindProject() {\n    this.setState({\n      isSkeletonLoading: true,\n      selectedProject: {}\n    });\n    let result = await request(`${ENDPOINT[\"GetProject\"]}?projectId=` + this.state.projectId\n    /*  + `&userId=` + this.state.userId */\n    , getOptions({}));\n\n    if (result.success) {\n      let objProject = result.result;\n      if (objProject.hasOwnProperty(\"postDateTime\")) objProject.postDateTime = moment(objProject.postDateTime).format(\"DD-MMM-YYYY\");\n      if (objProject.hasOwnProperty(\"expectedCompletionDays\")) objProject.expectedCompletionDays = objProject.expectedCompletionDays === null || objProject.expectedCompletionDays.trim() === \"\" ? 0 : objProject.expectedCompletionDays;\n      if (objProject.hasOwnProperty(\"projectRemainingDays\")) objProject.projectRemainingDays = objProject.projectRemainingDays === null || objProject.projectRemainingDays.trim() === \"\" ? 0 : objProject.projectRemainingDays;\n      if (objProject.hasOwnProperty(\"projectClosingDate\")) objProject.projectClosingDate = moment(objProject.projectClosingDate).format(\"DD-MMM-YYYY\");\n      if (objProject.hasOwnProperty(\"projectReviewNoOfStar\")) objProject.projectReviewNoOfStar = objProject.projectReviewNoOfStar.trim() !== \"\" ? parseInt(objProject.projectReviewNoOfStar) : 0;\n      if (objProject.hasOwnProperty(\"documentList\")) objProject.documentList = objProject.documentList === null ? [] : objProject.documentList;\n      if (objProject.hasOwnProperty(\"projectAmount\")) objProject.projectAmount = objProject.projectAmount === null || objProject.projectAmount.trim() === \"\" ? 0 : parseFloat(objProject.projectAmount).toFixed(2);\n      if (objProject.hasOwnProperty(\"fromSalary\")) objProject.fromSalary = objProject.fromSalary === null || objProject.fromSalary.trim() === \"\" ? 0 : parseFloat(objProject.fromSalary).toFixed(2);\n      if (objProject.hasOwnProperty(\"toSalary\")) objProject.toSalary = objProject.toSalary === null || objProject.toSalary.trim() === \"\" ? 0 : parseFloat(objProject.toSalary).toFixed(2);\n      if (objProject.hasOwnProperty(\"winningAmount\")) objProject.winningAmount = objProject.winningAmount === null || objProject.winningAmount.trim() === \"\" ? 0 : parseFloat(objProject.winningAmount).toFixed(2);\n      if (objProject.hasOwnProperty(\"isUserProposalExist\")) objProject.isUserProposalExist = objProject.isUserProposalExist !== null && objProject.isUserProposalExist !== \"\" ? objProject.isUserProposalExist : false;\n      if (objProject.hasOwnProperty(\"proposalCount\")) objProject.proposalCount = objProject.proposalCount === null || objProject.proposalCount.trim() === \"\" ? 0 : objProject.proposalCount;\n      if (objProject.hasOwnProperty(\"amountPerDay\")) objProject.amountPerDay = objProject.amountPerDay === null || objProject.amountPerDay.trim() === \"\" ? 0 : parseFloat(objProject.amountPerDay).toFixed(2);\n      if (objProject.hasOwnProperty(\"amountPerHour\")) objProject.amountPerHour = objProject.amountPerHour === null || objProject.amountPerHour.trim() === \"\" ? 0 : parseFloat(objProject.amountPerHour).toFixed(2);\n      if (objProject.hasOwnProperty(\"hourlyDetails\") && objProject.hourlyDetails !== \"\") objProject.fromSalary = objProject.hourlyDetails.trim() === \"\" ? 0 : Math.min.apply(Math, JSON.parse(objProject.hourlyDetails).map(function (x) {\n        return x.fromAmount;\n      })).toFixed(2);\n      if (objProject.hasOwnProperty(\"maximumWeekHours\")) objProject.maximumWeekHours = objProject.maximumWeekHours !== undefined && objProject.maximumWeekHours !== null && objProject.maximumWeekHours.trim() !== \"\" ? parseInt(objProject.maximumWeekHours) : 0;\n\n      if (objProject.hasOwnProperty(\"screeningQuestions\")) {\n        if (objProject.screeningQuestions && objProject.screeningQuestions.trim() !== \"\" && objProject.screeningQuestions !== null && objProject.screeningQuestions !== undefined) {\n          let screeningQuestions = JSON.parse(objProject.screeningQuestions);\n          screeningQuestions.map((objProject, i) => {\n            this.state.screeningQuestionList.push({\n              questionId: objProject.questionId,\n              question: objProject.question,\n              answer: \"\"\n            });\n          });\n        } else objProject.screeningQuestionList = [];\n      }\n\n      objProject.jobDescription = objProject.jobDescription.startsWith(\"<p>\") ? objProject.jobDescription.slice(3) : objProject.jobDescription;\n      objProject.jobDescription = objProject.jobDescription.endsWith(\"</p>\") ? objProject.jobDescription.slice(0, -4) : objProject.jobDescription;\n\n      if (this.state.projectProposalId) {\n        this.bindProposalDetail();\n      }\n\n      this.setState({\n        isSkeletonLoading: false,\n        selectedProject: objProject\n      });\n    } else {\n      this.props.onRouteChange(\"/all-projects\");\n      this.props.history.push(\"/all-projects\");\n    }\n  }\n\n  async bindProposalDetail() {\n    let result = await request(`${ENDPOINT[\"GetProposal\"]}?projectProposalId=${this.state.projectProposalId}`, getOptions({}));\n\n    if (result.success) {\n      let element = result.result;\n      this.setState({\n        description: element.description,\n        coverLetter: element.coverLetter,\n        existingProposalData: element\n      });\n      let screeningQuestions = this.state.screeningQuestionList;\n      screeningQuestions.map((screeningQuestion, i) => {\n        let question = JSON.parse(element.screeningQuestions).find(x => x.questionId === screeningQuestion.questionId);\n        if (question !== null) screeningQuestion.answer = question.answer;\n      });\n    }\n  } //#endregion Bind Contest, Proposal Detail\n  //#region Click Events\n\n\n  //#endregion Click Events\n  //#region Post Contest Proposal\n  handleValidation() {\n    let {\n      languageType\n    } = this.props;\n    let errorMessage = {};\n    let formIsValid = true;\n\n    if (this.state.projectId === null || this.state.projectId === \"\") {\n      formIsValid = false;\n      errorMessage[\"projectId\"] = languageType.REQUIRED_MESSAGE;\n    } else if (this.state.description === null || this.state.description === \"\") {\n      formIsValid = false;\n      errorMessage[\"description\"] = languageType.REQUIRED_MESSAGE;\n    } else if ((this.state.selectedProject.projectType === ProjectType.Contest || this.state.selectedProject.projectType === ProjectType.FreeContract || this.state.selectedProject.projectType === ProjectType.OfficeWork) && (!this.state.amount || this.state.amount === null || this.state.amount === \"\")) {\n      formIsValid = false;\n      errorMessage[\"amount\"] = languageType.REQUIRED_MESSAGE;\n    } else if (this.state.selectedProject.projectType === ProjectType.Hourly && (!this.state.hourlyAmount || this.state.hourlyAmount === null || this.state.hourlyAmount === \"\")) {\n      formIsValid = false;\n      errorMessage[\"hourlyAmount\"] = languageType.REQUIRED_MESSAGE;\n    } else if (this.state.selectedProject.projectType === ProjectType.Milestone && this.state.milestoneList.filter(x => x.milestoneDescription === \"\").length > 0) {\n      formIsValid = false;\n      errorMessage[\"milestone\"] = languageType.REQUIRED_MESSAGE;\n    } else if (this.state.selectedProject.projectType === ProjectType.Milestone && this.state.milestoneList.filter(x => x.milestoneAmount === \"\" || x.milestoneAmount === \"0\").length > 0) {\n      formIsValid = false;\n      errorMessage[\"milestone\"] = languageType.REQUIRED_MESSAGE;\n    } else if (this.state.selectedProject.projectType === ProjectType.Milestone && this.state.milestoneList.filter(x => x.milestoneDueDate === \"\").length > 0) {\n      formIsValid = false;\n      errorMessage[\"milestone\"] = languageType.REQUIRED_MESSAGE;\n    } else if (this.state.selectedProject.isCoverLetterRequired && (this.state.coverLetter === null || this.state.coverLetter === \"\")) {\n      formIsValid = false;\n      errorMessage[\"coverLetter\"] = languageType.REQUIRED_MESSAGE;\n    } else if (this.state.screeningQuestionList.length > 0 && this.state.screeningQuestionList.filter(x => x.answer === \"\").length > 0) {\n      formIsValid = false;\n      errorMessage[\"answer\"] = languageType.REQUIRED_MESSAGE;\n    }\n\n    this.setState({\n      errorMessage: errorMessage\n    });\n    return formIsValid;\n  } //#endregion Post Contest Proposal\n  //#region Form Submit Method\n\n\n  render() {\n    let {\n      languageType\n    } = this.props;\n    let lessText = \"Show Less\";\n    let {\n      isSkeletonLoading,\n      selectedProject,\n      coverLetter,\n      description,\n      userId,\n      projectId,\n      projectProposalId,\n      existingProposalData,\n      companyFreelancers,\n      documents,\n      uploading\n    } = this.state;\n    let isMilestone,\n        isHourly,\n        isFreeContract,\n        isofficeWork,\n        iscontest = false;\n    if (selectedProject.projectType === ProjectType.Milestone) isMilestone = true;\n    if (selectedProject.projectType === ProjectType.Hourly) isHourly = true;\n\n    if (selectedProject.projectType === ProjectType.FreeContract || selectedProject.projectType === \"Free Contract\") {\n      isFreeContract = true;\n    }\n\n    if (selectedProject.projectType && selectedProject.projectType.replace(/\\s/g, \"\") === ProjectType.OfficeWork) isofficeWork = true;\n    if (selectedProject.projectType === ProjectType.Contest) iscontest = true;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SubHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"card_sec\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bcknd_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-2 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-8 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Skeleton, {\n      count: 5,\n      isSkeletonLoading: isSkeletonLoading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"project-client-detail-area project_propose_area\",\n      hidden: isSkeletonLoading,\n      style: {\n        marginTop: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"project-client-detail-heading\",\n      style: {\n        textTransform: \"uppercase\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 19\n      }\n    }, languageType.PROJECT_PROPOSAL), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 project_propose_area_cardBox_colAlign\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(ProjectCardbox, {\n      key: `cardProject${0}`,\n      selectedProject: selectedProject,\n      index: 0,\n      IsNewDesign: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"project-client-detail-heading\",\n      style: {\n        textTransform: \"uppercase\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 19\n      }\n    }, languageType.PROJECT_DETAIL), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input_proposal_area\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 23\n      }\n    }, \" \", /*#__PURE__*/React.createElement(Label, {\n      title: \"Propose Description\",\n      compulsory: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: coverLetter,\n      onChange: event => this.handleUpdateBasicInfo(\"coverLetter\", event.target.value),\n      placeholder: \"Proposing Title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 25\n      }\n    }), this.state.errorMessage.coverLetter && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 27\n      }\n    }, \" \", this.state.errorMessage.coverLetter, \" \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"proposal-file-upload\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"attach-files-button-for-proposal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 28\n      }\n    }, \"  Attach file  \\xA0  \", /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-paperclip\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 56\n      }\n    })))), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      accept: \"jpg jpeg png PNG gif\",\n      onChange: e => {\n        let size = e.target.files[0] ? e.target.files[0].size : 0;\n\n        if (size < 1048576) {\n          this.handleUploadImage(e.target.files[0]);\n        } else {\n          notifications.showWarning(languageType.IMAGE_UPLOADING_SIZE_TEXT);\n        }\n      },\n      id: \"proposal-file-upload\",\n      style: {\n        visibility: \"hidden\",\n        height: '0px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"textarea\", {\n      name: \"textarea\",\n      rows: \"10\",\n      value: description,\n      onChange: event => this.handleUpdateBasicInfo(\"description\", event.target.value),\n      placeholder: \"Write your proposal here\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 21\n      }\n    }), this.state.errorMessage.description && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 23\n      }\n    }, \" \", this.state.errorMessage.description, \" \"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      hidden: documents.length === 0,\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"uploaded-files-area-proposal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 25\n      }\n    }, documents.map((item, index) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"uploaded-files-area-proposal-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 59\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-paperclip\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 29\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 62\n      }\n    }, item), \" \", /*#__PURE__*/React.createElement(\"i\", {\n      title: \"Delate this file\",\n      onClick: () => this.handleDeleteImage(item, index),\n      class: \"fas fa-close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 82\n      }\n    }))))))), isMilestone && /*#__PURE__*/React.createElement(Milestone, Object.assign({\n      selectedProject: { ...selectedProject\n      },\n      proposalData: {\n        userId: userId,\n        projectId: projectId,\n        coverLetter: coverLetter,\n        description: description,\n        screeningQuestionList: this.state.screeningQuestionList,\n        projectProposalId: projectProposalId\n      },\n      handleInitialValidation: this.handleInitialValidation,\n      languageType: languageType,\n      existingProposalData: existingProposalData,\n      companyFreelancers: companyFreelancers,\n      documents: documents\n    }, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 21\n      }\n    })), isHourly && /*#__PURE__*/React.createElement(Hourly, Object.assign({\n      selectedProject: { ...selectedProject\n      },\n      proposalData: {\n        userId: userId,\n        projectId: projectId,\n        coverLetter: coverLetter,\n        description: description,\n        screeningQuestionList: this.state.screeningQuestionList,\n        projectProposalId: projectProposalId\n      },\n      handleInitialValidation: this.handleInitialValidation,\n      languageType: languageType,\n      documents: documents,\n      existingProposalData: existingProposalData,\n      companyFreelancers: companyFreelancers\n    }, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 21\n      }\n    })), isFreeContract && /*#__PURE__*/React.createElement(FreeContract, Object.assign({\n      selectedProject: { ...selectedProject\n      },\n      proposalData: {\n        userId: userId,\n        projectId: projectId,\n        coverLetter: coverLetter,\n        description: description,\n        screeningQuestionList: this.state.screeningQuestionList,\n        projectProposalId: projectProposalId\n      },\n      handleInitialValidation: this.handleInitialValidation,\n      languageType: languageType,\n      existingProposalData: existingProposalData,\n      documents: documents,\n      companyFreelancers: companyFreelancers\n    }, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 613,\n        columnNumber: 21\n      }\n    })), isofficeWork && /*#__PURE__*/React.createElement(OfficeWork, Object.assign({\n      selectedProject: { ...selectedProject\n      },\n      proposalData: {\n        userId: userId,\n        projectId: projectId,\n        coverLetter: coverLetter,\n        description: description,\n        screeningQuestionList: this.state.screeningQuestionList,\n        projectProposalId: projectProposalId\n      },\n      handleInitialValidation: this.handleInitialValidation,\n      languageType: languageType,\n      existingProposalData: existingProposalData,\n      documents: documents,\n      companyFreelancers: companyFreelancers\n    }, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 21\n      }\n    })), iscontest && /*#__PURE__*/React.createElement(ContestTypeProposal, Object.assign({\n      selectedProject: { ...selectedProject\n      },\n      proposalData: {\n        userId: userId,\n        projectId: projectId,\n        coverLetter: coverLetter,\n        description: description,\n        screeningQuestionList: this.state.screeningQuestionList,\n        projectProposalId: projectProposalId\n      },\n      handleInitialValidation: this.handleInitialValidation,\n      languageType: languageType,\n      existingProposalData: existingProposalData\n    }, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 651,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-2 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(FileUploadLoader, {\n      title: \" Uploading new file...\",\n      show: uploading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 676,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    languageType: state.languageReducer.languageType,\n    language: state.languageReducer.language,\n    activeRoute: state.routeStore.activeRoute,\n    authUser: state.authReducer\n  };\n}\n\nfunction mapDispatchProps(dispatch) {\n  return {\n    onRouteChange: activeRoute => {\n      dispatch(onReduxRouteChange(activeRoute));\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchProps)(PostProjectProposal);","map":{"version":3,"sources":["/var/www/php74/bearolefrontend/src/container/project/projectProposals/postProjectProposal.jsx"],"names":["React","Component","connect","moment","CKEditor","ClassicEditor","ShowMoreText","onReduxRouteChange","request","ENDPOINT","ProjectTypeConst","ProjectType","getOptions","postOptions","RightTop","RightBottom","Skeleton","Label","Milestone","Hourly","FreeContract","OfficeWork","ContestTypeProposal","Currency","Format","ProjectTypeBadge","FormatDWH","ProjectCardbox","SubHeader","notifications","uploadImage","deleteImage","FileUploadLoader","PostProjectProposal","constructor","props","getCompanyMembers","organizationId","state","userId","result","success","setState","companyFreelancers","showWarning","addClickMilestone","array","milestoneList","maxMilestoneId","Math","max","map","item","milestoneId","push","id","milestoneDescription","milestoneAmount","milestoneDueDate","removeClickMilestone","index","splice","onFormSubmitHandle","event","preventDefault","handleInitialValidation","type","languageType","errorMessage","REQUIRED_MESSAGE","handleUpdateBasicInfo","value","errMsg","handleUploadImage","file","uploading","response","documents","s3Key","showError","handleDeleteImage","key","documentsAll","slice","authUser","freelancerAuth","individualFreelancerId","organizationAuth","projectId","URLSearchParams","location","search","get","projectProposalId","description","coverLetter","amount","hourlyAmount","expectedCompletionDays","milestone","screeningQuestionList","isSkeletonLoading","selectedProject","existingProposalData","componentWillMount","bindProject","objProject","hasOwnProperty","postDateTime","format","trim","projectRemainingDays","projectClosingDate","projectReviewNoOfStar","parseInt","documentList","projectAmount","parseFloat","toFixed","fromSalary","toSalary","winningAmount","isUserProposalExist","proposalCount","amountPerDay","amountPerHour","hourlyDetails","min","apply","JSON","parse","x","fromAmount","maximumWeekHours","undefined","screeningQuestions","i","questionId","question","answer","jobDescription","startsWith","endsWith","bindProposalDetail","onRouteChange","history","element","screeningQuestion","find","handleValidation","formIsValid","projectType","Contest","filter","length","isCoverLetterRequired","render","lessText","isMilestone","isHourly","isFreeContract","isofficeWork","iscontest","replace","marginTop","textTransform","PROJECT_PROPOSAL","PROJECT_DETAIL","target","e","size","files","IMAGE_UPLOADING_SIZE_TEXT","visibility","height","mapStateToProps","languageReducer","language","activeRoute","routeStore","authReducer","mapDispatchProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,QAAT,QAAyB,2BAAzB;AACA,OAAOC,aAAP,MAA0B,mCAA1B;AACA,OAAOC,YAAP,MAAyB,sBAAzB;AACA,SAASC,kBAAT,QAAmC,8BAAnC;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,SAASC,QAAT,QAAyB,yBAAzB;AACA,SAASC,gBAAT,EAA2BC,WAA3B,QAA8C,6BAA9C;AACA,SAASC,UAAT,EAAqBC,WAArB,QAAwC,2BAAxC;AACA,OAAOC,QAAP,MAAqB,uCAArB;AACA,OAAOC,WAAP,MAAwB,0CAAxB;AACA,OAAOC,QAAP,MAAqB,uCAArB;AACA,OAAO,sCAAP;AACA,OAAO,4BAAP;AACA,OAAOC,KAAP,MAAkB,uCAAlB;AACA,OAAOC,SAAP,MAAsB,sDAAtB;AACA,OAAOC,MAAP,MAAmB,mDAAnB;AACA,OAAOC,YAAP,MAAyB,yDAAzB;AACA,OAAOC,UAAP,MAAuB,uDAAvB;AACA,OAAOC,mBAAP,MAAgC,yDAAhC;AACA,OAAOC,QAAP,MAAqB,8BAArB;AACA,OAAOC,MAAP,MAAmB,kCAAnB;AACA,OAAOC,gBAAP,MAA6B,8CAA7B;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,OAAOC,aAAP,MAA0B,8BAA1B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,gCAAzC;AACA,OAAOC,gBAAP,MAA6B,uCAA7B;;AAEA,MAAMC,mBAAN,SAAkChC,SAAlC,CAA4C;AAC1CiC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAAA;;AACjB,UAAMA,KAAN;;AADiB,SAkDnBC,iBAlDmB,GAkDC,YAAY;AAC9B,UAAIC,cAAc,GAAG,KAAKC,KAAL,CAAWC,MAAhC;;AACA,UAAIF,cAAJ,EAAoB;AAClB,YAAIG,MAAM,GAAG,MAAMhC,OAAO,CACvB,GAAEC,QAAQ,CAAC,8BAAD,CAAiC,mBAAkB4B,cAAe,EADrD,EAExBxB,WAAW,EAFa,CAA1B;;AAIA,YAAI2B,MAAM,CAACC,OAAX,EAAoB;AAClB,eAAKC,QAAL,CAAc;AAAEC,YAAAA,kBAAkB,EAAEH,MAAM,CAACA;AAA7B,WAAd;AACD,SAFD,MAEO;AACLX,UAAAA,aAAa,CAACe,WAAd,CACE,oDADF;AAGD;AACF;AACF,KAjEkB;;AAAA,SAiPnBC,iBAjPmB,GAiPC,MAAM;AACxB,UAAIC,KAAK,GAAG,KAAKR,KAAL,CAAWS,aAAvB;AACA,YAAMC,cAAc,GAAGC,IAAI,CAACC,GAAL,CACrB,GAAG,KAAKZ,KAAL,CAAWS,aAAX,CAAyBI,GAAzB,CAA8BC,IAAD,IAAUA,IAAI,CAACC,WAA5C,CADkB,CAAvB;AAGAP,MAAAA,KAAK,CAACQ,IAAN,CAAW;AACTC,QAAAA,EAAE,EAAEP,cAAc,GAAG,CADZ;AAETQ,QAAAA,oBAAoB,EAAE,EAFb;AAGTC,QAAAA,eAAe,EAAE,EAHR;AAITC,QAAAA,gBAAgB,EAAE;AAJT,OAAX;AAMA,WAAKhB,QAAL,CAAc;AAAEK,QAAAA,aAAa,EAAED;AAAjB,OAAd;AACD,KA7PkB;;AAAA,SA+PnBa,oBA/PmB,GA+PKC,KAAD,IAAW;AAChC,UAAId,KAAK,GAAG,KAAKR,KAAL,CAAWS,aAAvB;;AACA,UAAIa,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChBd,QAAAA,KAAK,CAACe,MAAN,CAAaD,KAAb,EAAoB,CAApB;AACA,aAAKlB,QAAL,CAAc;AAAEK,UAAAA,aAAa,EAAED;AAAjB,SAAd;AACD;AACF,KArQkB;;AAAA,SAoVnBgB,kBApVmB,GAoVGC,KAAD,IAAW;AAC9BA,MAAAA,KAAK,CAACC,cAAN;AACD,KAtVkB;;AAAA,SAyVnBC,uBAzVmB,GAyVQC,IAAD,IAAU;AAClC,UAAI;AAAEC,QAAAA;AAAF,UAAmB,KAAKhC,KAA5B;AACA,UAAIiC,YAAY,GAAG,EAAnB;AACAA,MAAAA,YAAY,CAACF,IAAD,CAAZ,GAAqBC,YAAY,CAACE,gBAAlC;AACA,WAAK3B,QAAL,CAAc;AAAE0B,QAAAA,YAAY,EAAEA;AAAhB,OAAd;AACD,KA9VkB;;AAAA,SA+VnBE,qBA/VmB,GA+VK,CAACJ,IAAD,EAAOK,KAAP,KAAiB;AACvC,UAAIC,MAAM,GAAG,KAAKlC,KAAL,CAAW8B,YAAxB;AACA,aAAOI,MAAM,CAACN,IAAD,CAAb;AACA,WAAKxB,QAAL,CAAc;AAAE,SAACwB,IAAD,GAAQK,KAAV;AAAiBH,QAAAA,YAAY,EAAEI;AAA/B,OAAd;AACD,KAnWkB;;AAAA,SAoWlBC,iBApWkB,GAoWE,MAAOC,IAAP,IAAgB;AACnC,WAAKhC,QAAL,CAAc;AAACiC,QAAAA,SAAS,EAAC;AAAX,OAAd;AACA,UAAIC,QAAQ,GAAG,MAAM9C,WAAW,CAAC4C,IAAD,EAAO,QAAP,CAAhC;;AACA,UAAIE,QAAQ,CAACnC,OAAb,EAAsB;AACpB,aAAKC,QAAL,CAAc;AAACmC,UAAAA,SAAS,EAAC,CAAC,GAAG,KAAKvC,KAAL,CAAWuC,SAAf,EAAyBD,QAAQ,CAACpC,MAAT,CAAgBsC,KAAzC,CAAX;AAA2DH,UAAAA,SAAS,EAAC;AAArE,SAAd;AAED,OAHD,MAGO;AACL9C,QAAAA,aAAa,CAACkD,SAAd,CAAwBH,QAAQ,IAAI,wBAApC;AACA,aAAKlC,QAAL,CAAc;AAACiC,UAAAA,SAAS,EAAC;AAAX,SAAd;AACD;AACF,KA9WkB;;AAAA,SAgXlBK,iBAhXkB,GAgXE,OAAOC,GAAP,EAAWrB,KAAX,KAAqB;AACxC,UAAIsB,YAAY,GAAC,CAAC,GAAG,KAAK5C,KAAL,CAAWuC,SAAf,CAAjB;AACCK,MAAAA,YAAY,CAACrB,MAAb,CAAoBD,KAApB,EAA0B,CAA1B;AACD,WAAKlB,QAAL,CAAc;AAACmC,QAAAA,SAAS,EAACK;AAAX,OAAd;;AACA,UAAID,GAAG,CAACE,KAAJ,CAAU,CAAV,EAAa,CAAb,KAAmB,OAAvB,EAAgC;AAC9B,cAAMpD,WAAW,CAACkD,GAAD,CAAjB;AACD;AACF,KAvXkB;;AAEjB,SAAK3C,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE,oBAAAJ,KAAK,CAACiD,QAAN,6FAAgBC,cAAhB,gFAAgCC,sBAAhC,wBACJnD,KAAK,CAACiD,QADF,8EACJ,iBAAgBC,cADZ,0DACJ,sBAAgCC,sBAD5B,uBAEJnD,KAAK,CAACiD,QAFF,8EAEJ,iBAAgBG,gBAFZ,0DAEJ,sBAAkClD,cAH3B;AAIXmD,MAAAA,SAAS,EACP,IAAIC,eAAJ,CAAoB,KAAKtD,KAAL,CAAWuD,QAAX,CAAoBC,MAAxC,EAAgDC,GAAhD,CAAoD,WAApD,MACA,IADA,GAEI,IAAIH,eAAJ,CAAoB,KAAKtD,KAAL,CAAWuD,QAAX,CAAoBC,MAAxC,EAAgDC,GAAhD,CAAoD,WAApD,CAFJ,GAGI,EARK;AASXC,MAAAA,iBAAiB,EACf,IAAIJ,eAAJ,CAAoB,KAAKtD,KAAL,CAAWuD,QAAX,CAAoBC,MAAxC,EAAgDC,GAAhD,CACE,mBADF,MAEM,IAFN,GAGI,IAAIH,eAAJ,CAAoB,KAAKtD,KAAL,CAAWuD,QAAX,CAAoBC,MAAxC,EAAgDC,GAAhD,CACE,mBADF,CAHJ,GAMI,EAhBK;AAiBXE,MAAAA,WAAW,EAAE,EAjBF;AAkBXC,MAAAA,WAAW,EAAE,EAlBF;AAmBXC,MAAAA,MAAM,EAAE,EAnBG;AAoBXC,MAAAA,YAAY,EAAE,EApBH;AAqBXC,MAAAA,sBAAsB,EAAE,EArBb;AAsBXC,MAAAA,SAAS,EAAE;AACT9C,QAAAA,WAAW,EAAE,CADJ;AAETG,QAAAA,oBAAoB,EAAE,EAFb;AAGTC,QAAAA,eAAe,EAAE,EAHR;AAITC,QAAAA,gBAAgB,EAAE;AAJT,OAtBA;AA4BXX,MAAAA,aAAa,EAAE,EA5BJ;AA6BXqD,MAAAA,qBAAqB,EAAE,EA7BZ;AA8BXC,MAAAA,iBAAiB,EAAE,KA9BR;AA+BXC,MAAAA,eAAe,EAAE,EA/BN;AAgCXlC,MAAAA,YAAY,EAAE,EAhCH;AAiCXmC,MAAAA,oBAAoB,EAAE,EAjCX;AAkCX5D,MAAAA,kBAAkB,EAAE,EAlCT;AAmCXkC,MAAAA,SAAS,EAAC,EAnCC;AAoCXF,MAAAA,SAAS,EAAC;AApCC,KAAb;AAsCD;;AAED6B,EAAAA,kBAAkB,GAAG;AAAA;;AACnB,SAAKC,WAAL;AACA,SAAKnE,KAAL,CAAWS,aAAX,CAAyBO,IAAzB,CAA8B,KAAKhB,KAAL,CAAW6D,SAAzC;;AACA,gCAAI,KAAKhE,KAAL,CAAWiD,QAAf,kFAAI,qBAAqBG,gBAAzB,0DAAI,sBAAuClD,cAA3C,EAA2D;AACzD,WAAKD,iBAAL;AACD;AACF;;AAmBD;AACiB,QAAXqE,WAAW,GAAG;AAClB,SAAK/D,QAAL,CAAc;AAAE2D,MAAAA,iBAAiB,EAAE,IAArB;AAA2BC,MAAAA,eAAe,EAAE;AAA5C,KAAd;AACA,QAAI9D,MAAM,GAAG,MAAMhC,OAAO,CACvB,GAAEC,QAAQ,CAAC,YAAD,CAAe,aAA1B,GACE,KAAK6B,KAAL,CAAWkD;AAAU;AAFC,MAGxB5E,UAAU,CAAC,EAAD,CAHc,CAA1B;;AAKA,QAAI4B,MAAM,CAACC,OAAX,EAAoB;AAClB,UAAIiE,UAAU,GAAGlE,MAAM,CAACA,MAAxB;AAEA,UAAIkE,UAAU,CAACC,cAAX,CAA0B,cAA1B,CAAJ,EACED,UAAU,CAACE,YAAX,GAA0BzG,MAAM,CAACuG,UAAU,CAACE,YAAZ,CAAN,CAAgCC,MAAhC,CACxB,aADwB,CAA1B;AAGF,UAAIH,UAAU,CAACC,cAAX,CAA0B,wBAA1B,CAAJ,EACED,UAAU,CAACR,sBAAX,GACEQ,UAAU,CAACR,sBAAX,KAAsC,IAAtC,IACAQ,UAAU,CAACR,sBAAX,CAAkCY,IAAlC,OAA6C,EAD7C,GAEI,CAFJ,GAGIJ,UAAU,CAACR,sBAJjB;AAKF,UAAIQ,UAAU,CAACC,cAAX,CAA0B,sBAA1B,CAAJ,EACED,UAAU,CAACK,oBAAX,GACEL,UAAU,CAACK,oBAAX,KAAoC,IAApC,IACAL,UAAU,CAACK,oBAAX,CAAgCD,IAAhC,OAA2C,EAD3C,GAEI,CAFJ,GAGIJ,UAAU,CAACK,oBAJjB;AAKF,UAAIL,UAAU,CAACC,cAAX,CAA0B,oBAA1B,CAAJ,EACED,UAAU,CAACM,kBAAX,GAAgC7G,MAAM,CACpCuG,UAAU,CAACM,kBADyB,CAAN,CAE9BH,MAF8B,CAEvB,aAFuB,CAAhC;AAGF,UAAIH,UAAU,CAACC,cAAX,CAA0B,uBAA1B,CAAJ,EACED,UAAU,CAACO,qBAAX,GACEP,UAAU,CAACO,qBAAX,CAAiCH,IAAjC,OAA4C,EAA5C,GACII,QAAQ,CAACR,UAAU,CAACO,qBAAZ,CADZ,GAEI,CAHN;AAIF,UAAIP,UAAU,CAACC,cAAX,CAA0B,cAA1B,CAAJ,EACED,UAAU,CAACS,YAAX,GACET,UAAU,CAACS,YAAX,KAA4B,IAA5B,GAAmC,EAAnC,GAAwCT,UAAU,CAACS,YADrD;AAEF,UAAIT,UAAU,CAACC,cAAX,CAA0B,eAA1B,CAAJ,EACED,UAAU,CAACU,aAAX,GACEV,UAAU,CAACU,aAAX,KAA6B,IAA7B,IACAV,UAAU,CAACU,aAAX,CAAyBN,IAAzB,OAAoC,EADpC,GAEI,CAFJ,GAGIO,UAAU,CAACX,UAAU,CAACU,aAAZ,CAAV,CAAqCE,OAArC,CAA6C,CAA7C,CAJN;AAKF,UAAIZ,UAAU,CAACC,cAAX,CAA0B,YAA1B,CAAJ,EACED,UAAU,CAACa,UAAX,GACEb,UAAU,CAACa,UAAX,KAA0B,IAA1B,IAAkCb,UAAU,CAACa,UAAX,CAAsBT,IAAtB,OAAiC,EAAnE,GACI,CADJ,GAEIO,UAAU,CAACX,UAAU,CAACa,UAAZ,CAAV,CAAkCD,OAAlC,CAA0C,CAA1C,CAHN;AAIF,UAAIZ,UAAU,CAACC,cAAX,CAA0B,UAA1B,CAAJ,EACED,UAAU,CAACc,QAAX,GACEd,UAAU,CAACc,QAAX,KAAwB,IAAxB,IAAgCd,UAAU,CAACc,QAAX,CAAoBV,IAApB,OAA+B,EAA/D,GACI,CADJ,GAEIO,UAAU,CAACX,UAAU,CAACc,QAAZ,CAAV,CAAgCF,OAAhC,CAAwC,CAAxC,CAHN;AAIF,UAAIZ,UAAU,CAACC,cAAX,CAA0B,eAA1B,CAAJ,EACED,UAAU,CAACe,aAAX,GACEf,UAAU,CAACe,aAAX,KAA6B,IAA7B,IACAf,UAAU,CAACe,aAAX,CAAyBX,IAAzB,OAAoC,EADpC,GAEI,CAFJ,GAGIO,UAAU,CAACX,UAAU,CAACe,aAAZ,CAAV,CAAqCH,OAArC,CAA6C,CAA7C,CAJN;AAKF,UAAIZ,UAAU,CAACC,cAAX,CAA0B,qBAA1B,CAAJ,EACED,UAAU,CAACgB,mBAAX,GACEhB,UAAU,CAACgB,mBAAX,KAAmC,IAAnC,IACAhB,UAAU,CAACgB,mBAAX,KAAmC,EADnC,GAEIhB,UAAU,CAACgB,mBAFf,GAGI,KAJN;AAKF,UAAIhB,UAAU,CAACC,cAAX,CAA0B,eAA1B,CAAJ,EACED,UAAU,CAACiB,aAAX,GACEjB,UAAU,CAACiB,aAAX,KAA6B,IAA7B,IACAjB,UAAU,CAACiB,aAAX,CAAyBb,IAAzB,OAAoC,EADpC,GAEI,CAFJ,GAGIJ,UAAU,CAACiB,aAJjB;AAKF,UAAIjB,UAAU,CAACC,cAAX,CAA0B,cAA1B,CAAJ,EACED,UAAU,CAACkB,YAAX,GACElB,UAAU,CAACkB,YAAX,KAA4B,IAA5B,IACAlB,UAAU,CAACkB,YAAX,CAAwBd,IAAxB,OAAmC,EADnC,GAEI,CAFJ,GAGIO,UAAU,CAACX,UAAU,CAACkB,YAAZ,CAAV,CAAoCN,OAApC,CAA4C,CAA5C,CAJN;AAKF,UAAIZ,UAAU,CAACC,cAAX,CAA0B,eAA1B,CAAJ,EACED,UAAU,CAACmB,aAAX,GACEnB,UAAU,CAACmB,aAAX,KAA6B,IAA7B,IACAnB,UAAU,CAACmB,aAAX,CAAyBf,IAAzB,OAAoC,EADpC,GAEI,CAFJ,GAGIO,UAAU,CAACX,UAAU,CAACmB,aAAZ,CAAV,CAAqCP,OAArC,CAA6C,CAA7C,CAJN;AAKF,UACEZ,UAAU,CAACC,cAAX,CAA0B,eAA1B,KACAD,UAAU,CAACoB,aAAX,KAA6B,EAF/B,EAIEpB,UAAU,CAACa,UAAX,GACEb,UAAU,CAACoB,aAAX,CAAyBhB,IAAzB,OAAoC,EAApC,GACI,CADJ,GAEI7D,IAAI,CAAC8E,GAAL,CACGC,KADH,CAEI/E,IAFJ,EAGIgF,IAAI,CAACC,KAAL,CAAWxB,UAAU,CAACoB,aAAtB,EAAqC3E,GAArC,CAAyC,UAAUgF,CAAV,EAAa;AACpD,eAAOA,CAAC,CAACC,UAAT;AACD,OAFD,CAHJ,EAOGd,OAPH,CAOW,CAPX,CAHN;AAWF,UAAIZ,UAAU,CAACC,cAAX,CAA0B,kBAA1B,CAAJ,EACED,UAAU,CAAC2B,gBAAX,GACE3B,UAAU,CAAC2B,gBAAX,KAAgCC,SAAhC,IACA5B,UAAU,CAAC2B,gBAAX,KAAgC,IADhC,IAEA3B,UAAU,CAAC2B,gBAAX,CAA4BvB,IAA5B,OAAuC,EAFvC,GAGII,QAAQ,CAACR,UAAU,CAAC2B,gBAAZ,CAHZ,GAII,CALN;;AAOF,UAAI3B,UAAU,CAACC,cAAX,CAA0B,oBAA1B,CAAJ,EAAqD;AACnD,YACED,UAAU,CAAC6B,kBAAX,IACA7B,UAAU,CAAC6B,kBAAX,CAA8BzB,IAA9B,OAAyC,EADzC,IAEAJ,UAAU,CAAC6B,kBAAX,KAAkC,IAFlC,IAGA7B,UAAU,CAAC6B,kBAAX,KAAkCD,SAJpC,EAKE;AACA,cAAIC,kBAAkB,GAAGN,IAAI,CAACC,KAAL,CAAWxB,UAAU,CAAC6B,kBAAtB,CAAzB;AACAA,UAAAA,kBAAkB,CAACpF,GAAnB,CAAuB,CAACuD,UAAD,EAAa8B,CAAb,KAAmB;AACxC,iBAAKlG,KAAL,CAAW8D,qBAAX,CAAiC9C,IAAjC,CAAsC;AACpCmF,cAAAA,UAAU,EAAE/B,UAAU,CAAC+B,UADa;AAEpCC,cAAAA,QAAQ,EAAEhC,UAAU,CAACgC,QAFe;AAGpCC,cAAAA,MAAM,EAAE;AAH4B,aAAtC;AAKD,WAND;AAOD,SAdD,MAcOjC,UAAU,CAACN,qBAAX,GAAmC,EAAnC;AACR;;AAEDM,MAAAA,UAAU,CAACkC,cAAX,GAA4BlC,UAAU,CAACkC,cAAX,CAA0BC,UAA1B,CAAqC,KAArC,IACxBnC,UAAU,CAACkC,cAAX,CAA0BzD,KAA1B,CAAgC,CAAhC,CADwB,GAExBuB,UAAU,CAACkC,cAFf;AAGAlC,MAAAA,UAAU,CAACkC,cAAX,GAA4BlC,UAAU,CAACkC,cAAX,CAA0BE,QAA1B,CAAmC,MAAnC,IACxBpC,UAAU,CAACkC,cAAX,CAA0BzD,KAA1B,CAAgC,CAAhC,EAAmC,CAAC,CAApC,CADwB,GAExBuB,UAAU,CAACkC,cAFf;;AAIA,UAAI,KAAKtG,KAAL,CAAWuD,iBAAf,EAAkC;AAChC,aAAKkD,kBAAL;AACD;;AAED,WAAKrG,QAAL,CAAc;AACZ2D,QAAAA,iBAAiB,EAAE,KADP;AAEZC,QAAAA,eAAe,EAAEI;AAFL,OAAd;AAID,KArID,MAqIO;AACL,WAAKvE,KAAL,CAAW6G,aAAX,CAAyB,eAAzB;AACA,WAAK7G,KAAL,CAAW8G,OAAX,CAAmB3F,IAAnB,CAAwB,eAAxB;AACD;AACF;;AAEuB,QAAlByF,kBAAkB,GAAG;AACzB,QAAIvG,MAAM,GAAG,MAAMhC,OAAO,CACvB,GAAEC,QAAQ,CAAC,aAAD,CAAgB,sBAAqB,KAAK6B,KAAL,CAAWuD,iBAAkB,EADrD,EAExBjF,UAAU,CAAC,EAAD,CAFc,CAA1B;;AAKA,QAAI4B,MAAM,CAACC,OAAX,EAAoB;AAClB,UAAIyG,OAAO,GAAG1G,MAAM,CAACA,MAArB;AAEA,WAAKE,QAAL,CAAc;AACZoD,QAAAA,WAAW,EAAEoD,OAAO,CAACpD,WADT;AAEZC,QAAAA,WAAW,EAAEmD,OAAO,CAACnD,WAFT;AAGZQ,QAAAA,oBAAoB,EAAE2C;AAHV,OAAd;AAMA,UAAIX,kBAAkB,GAAG,KAAKjG,KAAL,CAAW8D,qBAApC;AACAmC,MAAAA,kBAAkB,CAACpF,GAAnB,CAAuB,CAACgG,iBAAD,EAAoBX,CAApB,KAA0B;AAC/C,YAAIE,QAAQ,GAAGT,IAAI,CAACC,KAAL,CAAWgB,OAAO,CAACX,kBAAnB,EAAuCa,IAAvC,CACZjB,CAAD,IAAOA,CAAC,CAACM,UAAF,KAAiBU,iBAAiB,CAACV,UAD7B,CAAf;AAGA,YAAIC,QAAQ,KAAK,IAAjB,EAAuBS,iBAAiB,CAACR,MAAlB,GAA2BD,QAAQ,CAACC,MAApC;AACxB,OALD;AAMD;AACF,GA9OyC,CA+O1C;AAEA;;;AAsBA;AAEA;AACAU,EAAAA,gBAAgB,GAAG;AACjB,QAAI;AAAElF,MAAAA;AAAF,QAAmB,KAAKhC,KAA5B;AACA,QAAIiC,YAAY,GAAG,EAAnB;AACA,QAAIkF,WAAW,GAAG,IAAlB;;AAEA,QAAI,KAAKhH,KAAL,CAAWkD,SAAX,KAAyB,IAAzB,IAAiC,KAAKlD,KAAL,CAAWkD,SAAX,KAAyB,EAA9D,EAAkE;AAChE8D,MAAAA,WAAW,GAAG,KAAd;AACAlF,MAAAA,YAAY,CAAC,WAAD,CAAZ,GAA4BD,YAAY,CAACE,gBAAzC;AACD,KAHD,MAGO,IACL,KAAK/B,KAAL,CAAWwD,WAAX,KAA2B,IAA3B,IACA,KAAKxD,KAAL,CAAWwD,WAAX,KAA2B,EAFtB,EAGL;AACAwD,MAAAA,WAAW,GAAG,KAAd;AACAlF,MAAAA,YAAY,CAAC,aAAD,CAAZ,GAA8BD,YAAY,CAACE,gBAA3C;AACD,KANM,MAMA,IACL,CAAC,KAAK/B,KAAL,CAAWgE,eAAX,CAA2BiD,WAA3B,KAA2C5I,WAAW,CAAC6I,OAAvD,IACC,KAAKlH,KAAL,CAAWgE,eAAX,CAA2BiD,WAA3B,KAA2C5I,WAAW,CAACS,YADxD,IAEC,KAAKkB,KAAL,CAAWgE,eAAX,CAA2BiD,WAA3B,KAA2C5I,WAAW,CAACU,UAFzD,MAGC,CAAC,KAAKiB,KAAL,CAAW0D,MAAZ,IACC,KAAK1D,KAAL,CAAW0D,MAAX,KAAsB,IADvB,IAEC,KAAK1D,KAAL,CAAW0D,MAAX,KAAsB,EALxB,CADK,EAOL;AACAsD,MAAAA,WAAW,GAAG,KAAd;AACAlF,MAAAA,YAAY,CAAC,QAAD,CAAZ,GAAyBD,YAAY,CAACE,gBAAtC;AACD,KAVM,MAUA,IACL,KAAK/B,KAAL,CAAWgE,eAAX,CAA2BiD,WAA3B,KAA2C5I,WAAW,CAACQ,MAAvD,KACC,CAAC,KAAKmB,KAAL,CAAW2D,YAAZ,IACC,KAAK3D,KAAL,CAAW2D,YAAX,KAA4B,IAD7B,IAEC,KAAK3D,KAAL,CAAW2D,YAAX,KAA4B,EAH9B,CADK,EAKL;AACAqD,MAAAA,WAAW,GAAG,KAAd;AACAlF,MAAAA,YAAY,CAAC,cAAD,CAAZ,GAA+BD,YAAY,CAACE,gBAA5C;AACD,KARM,MAQA,IACL,KAAK/B,KAAL,CAAWgE,eAAX,CAA2BiD,WAA3B,KAA2C5I,WAAW,CAACO,SAAvD,IACA,KAAKoB,KAAL,CAAWS,aAAX,CAAyB0G,MAAzB,CAAiCtB,CAAD,IAAOA,CAAC,CAAC3E,oBAAF,KAA2B,EAAlE,EACGkG,MADH,GACY,CAHP,EAIL;AACAJ,MAAAA,WAAW,GAAG,KAAd;AACAlF,MAAAA,YAAY,CAAC,WAAD,CAAZ,GAA4BD,YAAY,CAACE,gBAAzC;AACD,KAPM,MAOA,IACL,KAAK/B,KAAL,CAAWgE,eAAX,CAA2BiD,WAA3B,KAA2C5I,WAAW,CAACO,SAAvD,IACA,KAAKoB,KAAL,CAAWS,aAAX,CAAyB0G,MAAzB,CACGtB,CAAD,IAAOA,CAAC,CAAC1E,eAAF,KAAsB,EAAtB,IAA4B0E,CAAC,CAAC1E,eAAF,KAAsB,GAD3D,EAEEiG,MAFF,GAEW,CAJN,EAKL;AACAJ,MAAAA,WAAW,GAAG,KAAd;AACAlF,MAAAA,YAAY,CAAC,WAAD,CAAZ,GAA4BD,YAAY,CAACE,gBAAzC;AACD,KARM,MAQA,IACL,KAAK/B,KAAL,CAAWgE,eAAX,CAA2BiD,WAA3B,KAA2C5I,WAAW,CAACO,SAAvD,IACA,KAAKoB,KAAL,CAAWS,aAAX,CAAyB0G,MAAzB,CAAiCtB,CAAD,IAAOA,CAAC,CAACzE,gBAAF,KAAuB,EAA9D,EAAkEgG,MAAlE,GACE,CAHG,EAIL;AACAJ,MAAAA,WAAW,GAAG,KAAd;AACAlF,MAAAA,YAAY,CAAC,WAAD,CAAZ,GAA4BD,YAAY,CAACE,gBAAzC;AACD,KAPM,MAOA,IACL,KAAK/B,KAAL,CAAWgE,eAAX,CAA2BqD,qBAA3B,KACC,KAAKrH,KAAL,CAAWyD,WAAX,KAA2B,IAA3B,IAAmC,KAAKzD,KAAL,CAAWyD,WAAX,KAA2B,EAD/D,CADK,EAGL;AACAuD,MAAAA,WAAW,GAAG,KAAd;AACAlF,MAAAA,YAAY,CAAC,aAAD,CAAZ,GAA8BD,YAAY,CAACE,gBAA3C;AACD,KANM,MAMA,IACL,KAAK/B,KAAL,CAAW8D,qBAAX,CAAiCsD,MAAjC,GAA0C,CAA1C,IACA,KAAKpH,KAAL,CAAW8D,qBAAX,CAAiCqD,MAAjC,CAAyCtB,CAAD,IAAOA,CAAC,CAACQ,MAAF,KAAa,EAA5D,EAAgEe,MAAhE,GAAyE,CAFpE,EAGL;AACAJ,MAAAA,WAAW,GAAG,KAAd;AACAlF,MAAAA,YAAY,CAAC,QAAD,CAAZ,GAAyBD,YAAY,CAACE,gBAAtC;AACD;;AAED,SAAK3B,QAAL,CAAc;AAAE0B,MAAAA,YAAY,EAAEA;AAAhB,KAAd;AACA,WAAOkF,WAAP;AACD,GAhVyC,CAkV1C;AAEA;;;AAqCAM,EAAAA,MAAM,GAAG;AACP,QAAI;AAAEzF,MAAAA;AAAF,QAAmB,KAAKhC,KAA5B;AACA,QAAI0H,QAAQ,GAAG,WAAf;AACA,QAAI;AACFxD,MAAAA,iBADE;AAEFC,MAAAA,eAFE;AAGFP,MAAAA,WAHE;AAIFD,MAAAA,WAJE;AAKFvD,MAAAA,MALE;AAMFiD,MAAAA,SANE;AAOFK,MAAAA,iBAPE;AAQFU,MAAAA,oBARE;AASF5D,MAAAA,kBATE;AAUFkC,MAAAA,SAVE;AAWFF,MAAAA;AAXE,QAYA,KAAKrC,KAZT;AAcA,QAAIwH,WAAJ;AAAA,QACEC,QADF;AAAA,QAEEC,cAFF;AAAA,QAGEC,YAHF;AAAA,QAIEC,SAAS,GAAG,KAJd;AAKA,QAAI5D,eAAe,CAACiD,WAAhB,KAAgC5I,WAAW,CAACO,SAAhD,EACE4I,WAAW,GAAG,IAAd;AACF,QAAIxD,eAAe,CAACiD,WAAhB,KAAgC5I,WAAW,CAACQ,MAAhD,EAAwD4I,QAAQ,GAAG,IAAX;;AACxD,QACEzD,eAAe,CAACiD,WAAhB,KAAgC5I,WAAW,CAACS,YAA5C,IACAkF,eAAe,CAACiD,WAAhB,KAAgC,eAFlC,EAGE;AACAS,MAAAA,cAAc,GAAG,IAAjB;AACD;;AACD,QACE1D,eAAe,CAACiD,WAAhB,IACAjD,eAAe,CAACiD,WAAhB,CAA4BY,OAA5B,CAAoC,KAApC,EAA2C,EAA3C,MAAmDxJ,WAAW,CAACU,UAFjE,EAIE4I,YAAY,GAAG,IAAf;AACF,QAAI3D,eAAe,CAACiD,WAAhB,KAAgC5I,WAAW,CAAC6I,OAAhD,EAAyDU,SAAS,GAAG,IAAZ;AACzD,wBACE,uDACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAS,MAAA,SAAS,EAAC,UAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE,oBAAC,QAAD;AAAU,MAAA,KAAK,EAAE,CAAjB;AAAoB,MAAA,iBAAiB,EAAE7D,iBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAIE;AACE,MAAA,SAAS,EAAC,iDADZ;AAEE,MAAA,MAAM,EAAEA,iBAFV;AAGE,MAAA,KAAK,EAAE;AAAE+D,QAAAA,SAAS,EAAE;AAAb,OAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE;AACE,MAAA,SAAS,EAAC,+BADZ;AAEE,MAAA,KAAK,EAAE;AAAEC,QAAAA,aAAa,EAAE;AAAjB,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGlG,YAAY,CAACmG,gBAJhB,CALF,eAYE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,8CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,cAAD;AACE,MAAA,GAAG,EAAG,cAAa,CAAE,EADvB;AAEE,MAAA,eAAe,EAAEhE,eAFnB;AAGE,MAAA,KAAK,EAAE,CAHT;AAIE,MAAA,WAAW,EAAE,CAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CAZF,eAsBE;AACE,MAAA,SAAS,EAAC,+BADZ;AAEE,MAAA,KAAK,EAAE;AAAE+D,QAAAA,aAAa,EAAE;AAAjB,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIGlG,YAAY,CAACoG,cAJhB,CAtBF,eA6BE;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,eAEE,oBAAC,KAAD;AACE,MAAA,KAAK,EAAE,qBADT;AAEE,MAAA,UAAU,EAAE,IAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAME;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,KAAK,EAAExE,WAFT;AAGE,MAAA,QAAQ,EAAGhC,KAAD,IACR,KAAKO,qBAAL,CACE,aADF,EAEEP,KAAK,CAACyG,MAAN,CAAajG,KAFf,CAJJ;AASE,MAAA,WAAW,EAAC,iBATd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,EAiBG,KAAKjC,KAAL,CAAW8B,YAAX,CAAwB2B,WAAxB,iBACC;AAAG,MAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,EAEG,KAAKzD,KAAL,CAAW8B,YAAX,CAAwB2B,WAF3B,EAEwC,GAFxC,CAlBJ,CADF,eAyBE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,GAAG,EAAE,sBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAK,MAAA,SAAS,EAAC,kCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAA4B;AAAG,MAAA,KAAK,EAAC,kBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA5B,CADH,CADA,CADF,eAME;AAAO,MAAA,IAAI,EAAE,MAAb;AACE,MAAA,MAAM,EAAC,sBADT;AAEE,MAAA,QAAQ,EAAG0E,CAAD,IAAO;AACf,YAAIC,IAAI,GAAGD,CAAC,CAACD,MAAF,CAASG,KAAT,CAAe,CAAf,IACPF,CAAC,CAACD,MAAF,CAASG,KAAT,CAAe,CAAf,EAAkBD,IADX,GAEP,CAFJ;;AAGA,YAAIA,IAAI,GAAG,OAAX,EAAoB;AAClB,eAAKjG,iBAAL,CAAuBgG,CAAC,CAACD,MAAF,CAASG,KAAT,CAAe,CAAf,CAAvB;AACD,SAFD,MAEO;AACL9I,UAAAA,aAAa,CAACe,WAAd,CACEuB,YAAY,CAACyG,yBADf;AAGD;AACF,OAbH;AAcA,MAAA,EAAE,EAAE,sBAdJ;AAc6B,MAAA,KAAK,EAAE;AAACC,QAAAA,UAAU,EAAC,QAAZ;AAAqBC,QAAAA,MAAM,EAAC;AAA5B,OAdpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,CAzBF,CADF,eAoDE;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,IAAI,EAAC,IAFP;AAGE,MAAA,KAAK,EAAEhF,WAHT;AAIE,MAAA,QAAQ,EAAG/B,KAAD,IACR,KAAKO,qBAAL,CACE,aADF,EAEEP,KAAK,CAACyG,MAAN,CAAajG,KAFf,CALJ;AAUE,MAAA,WAAW,EAAC,0BAVd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApDF,EAgEG,KAAKjC,KAAL,CAAW8B,YAAX,CAAwB0B,WAAxB,iBACC;AAAG,MAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,EAEG,KAAKxD,KAAL,CAAW8B,YAAX,CAAwB0B,WAF3B,EAEwC,GAFxC,CAjEJ,eAsEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtEF,eAuEE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAK,MAAA,MAAM,EAAEjB,SAAS,CAAC6E,MAAV,KAAmB,CAAhC;AAAmC,MAAA,SAAS,EAAC,QAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,eAEI;AAAK,MAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI7E,SAAS,CAAC1B,GAAV,CAAc,CAACC,IAAD,EAAMQ,KAAN,kBAAgB;AAAK,MAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAC9B;AAAG,MAAA,KAAK,EAAC,kBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAD8B,oBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOR,IAAP,CADH,oBACuB;AAAG,MAAA,KAAK,EAAC,kBAAT;AAA4B,MAAA,OAAO,EAAE,MAAI,KAAK4B,iBAAL,CAAuB5B,IAAvB,EAA4BQ,KAA5B,CAAzC;AAA6E,MAAA,KAAK,EAAC,cAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADvB,CAA9B,CAFJ,CAFJ,CADA,CAvEF,CA7BF,EAmHGkG,WAAW,iBACV,oBAAC,SAAD;AACE,MAAA,eAAe,EAAE,EAAE,GAAGxD;AAAL,OADnB;AAEE,MAAA,YAAY,EAAE;AACZ/D,QAAAA,MAAM,EAAEA,MADI;AAEZiD,QAAAA,SAAS,EAAEA,SAFC;AAGZO,QAAAA,WAAW,EAAEA,WAHD;AAIZD,QAAAA,WAAW,EAAEA,WAJD;AAKZM,QAAAA,qBAAqB,EAAE,KAAK9D,KAAL,CAAW8D,qBALtB;AAMZP,QAAAA,iBAAiB,EAAEA;AANP,OAFhB;AAUE,MAAA,uBAAuB,EAAE,KAAK5B,uBAVhC;AAWE,MAAA,YAAY,EAAEE,YAXhB;AAYE,MAAA,oBAAoB,EAAEoC,oBAZxB;AAaE,MAAA,kBAAkB,EAAE5D,kBAbtB;AAcE,MAAA,SAAS,EAAEkC;AAdb,OAeM,KAAK1C,KAfX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OApHJ,EAuIG4H,QAAQ,iBACP,oBAAC,MAAD;AACE,MAAA,eAAe,EAAE,EAAE,GAAGzD;AAAL,OADnB;AAEE,MAAA,YAAY,EAAE;AACZ/D,QAAAA,MAAM,EAAEA,MADI;AAEZiD,QAAAA,SAAS,EAAEA,SAFC;AAGZO,QAAAA,WAAW,EAAEA,WAHD;AAIZD,QAAAA,WAAW,EAAEA,WAJD;AAKZM,QAAAA,qBAAqB,EAAE,KAAK9D,KAAL,CAAW8D,qBALtB;AAMZP,QAAAA,iBAAiB,EAAEA;AANP,OAFhB;AAUE,MAAA,uBAAuB,EAAE,KAAK5B,uBAVhC;AAWE,MAAA,YAAY,EAAEE,YAXhB;AAYE,MAAA,SAAS,EAAEU,SAZb;AAaE,MAAA,oBAAoB,EAAE0B,oBAbxB;AAcE,MAAA,kBAAkB,EAAE5D;AAdtB,OAeM,KAAKR,KAfX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAxIJ,EA0JG6H,cAAc,iBACb,oBAAC,YAAD;AACE,MAAA,eAAe,EAAE,EAAE,GAAG1D;AAAL,OADnB;AAEE,MAAA,YAAY,EAAE;AACZ/D,QAAAA,MAAM,EAAEA,MADI;AAEZiD,QAAAA,SAAS,EAAEA,SAFC;AAGZO,QAAAA,WAAW,EAAEA,WAHD;AAIZD,QAAAA,WAAW,EAAEA,WAJD;AAKZM,QAAAA,qBAAqB,EAAE,KAAK9D,KAAL,CAAW8D,qBALtB;AAMZP,QAAAA,iBAAiB,EAAEA;AANP,OAFhB;AAUE,MAAA,uBAAuB,EAAE,KAAK5B,uBAVhC;AAWE,MAAA,YAAY,EAAEE,YAXhB;AAYE,MAAA,oBAAoB,EAAEoC,oBAZxB;AAaE,MAAA,SAAS,EAAE1B,SAbb;AAcE,MAAA,kBAAkB,EAAElC;AAdtB,OAeM,KAAKR,KAfX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OA3JJ,EA6KG8H,YAAY,iBACX,oBAAC,UAAD;AACE,MAAA,eAAe,EAAE,EAAE,GAAG3D;AAAL,OADnB;AAEE,MAAA,YAAY,EAAE;AACZ/D,QAAAA,MAAM,EAAEA,MADI;AAEZiD,QAAAA,SAAS,EAAEA,SAFC;AAGZO,QAAAA,WAAW,EAAEA,WAHD;AAIZD,QAAAA,WAAW,EAAEA,WAJD;AAKZM,QAAAA,qBAAqB,EAAE,KAAK9D,KAAL,CAAW8D,qBALtB;AAMZP,QAAAA,iBAAiB,EAAEA;AANP,OAFhB;AAUE,MAAA,uBAAuB,EAAE,KAAK5B,uBAVhC;AAWE,MAAA,YAAY,EAAEE,YAXhB;AAYE,MAAA,oBAAoB,EAAEoC,oBAZxB;AAaE,MAAA,SAAS,EAAE1B,SAbb;AAcE,MAAA,kBAAkB,EAAElC;AAdtB,OAeM,KAAKR,KAfX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OA9KJ,EAgMG+H,SAAS,iBACR,oBAAC,mBAAD;AACE,MAAA,eAAe,EAAE,EAAE,GAAG5D;AAAL,OADnB;AAEE,MAAA,YAAY,EAAE;AACZ/D,QAAAA,MAAM,EAAEA,MADI;AAEZiD,QAAAA,SAAS,EAAEA,SAFC;AAGZO,QAAAA,WAAW,EAAEA,WAHD;AAIZD,QAAAA,WAAW,EAAEA,WAJD;AAKZM,QAAAA,qBAAqB,EAAE,KAAK9D,KAAL,CAAW8D,qBALtB;AAMZP,QAAAA,iBAAiB,EAAEA;AANP,OAFhB;AAUE,MAAA,uBAAuB,EAAE,KAAK5B,uBAVhC;AAWE,MAAA,YAAY,EAAEE,YAXhB;AAYE,MAAA,oBAAoB,EAAEoC;AAZxB,OAaM,KAAKpE,KAbX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAjMJ,CAJF,CAFF,eAyNE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzNF,CADF,CADF,CAFF,eAoOE,oBAAC,gBAAD;AAAkB,MAAA,KAAK,EAAE,wBAAzB;AAAmD,MAAA,IAAI,EAAEwC,SAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApOF,CADF;AAwOD;;AAtoByC;;AAyoB5C,SAASoG,eAAT,CAAyBzI,KAAzB,EAAgC;AAC9B,SAAO;AACL6B,IAAAA,YAAY,EAAE7B,KAAK,CAAC0I,eAAN,CAAsB7G,YAD/B;AAEL8G,IAAAA,QAAQ,EAAE3I,KAAK,CAAC0I,eAAN,CAAsBC,QAF3B;AAGLC,IAAAA,WAAW,EAAE5I,KAAK,CAAC6I,UAAN,CAAiBD,WAHzB;AAIL9F,IAAAA,QAAQ,EAAE9C,KAAK,CAAC8I;AAJX,GAAP;AAMD;;AAED,SAASC,gBAAT,CAA0BC,QAA1B,EAAoC;AAClC,SAAO;AACLtC,IAAAA,aAAa,EAAGkC,WAAD,IAAiB;AAC9BI,MAAAA,QAAQ,CAAC/K,kBAAkB,CAAC2K,WAAD,CAAnB,CAAR;AACD;AAHI,GAAP;AAKD;;AAED,eAAehL,OAAO,CAAC6K,eAAD,EAAkBM,gBAAlB,CAAP,CAA2CpJ,mBAA3C,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport moment from \"moment\";\nimport { CKEditor } from \"@ckeditor/ckeditor5-react\";\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\nimport ShowMoreText from \"react-show-more-text\";\nimport { onReduxRouteChange } from \"../../../store/action/action\";\nimport request from \"../../../utils/request\";\nimport { ENDPOINT } from \"../../../utils/endpoint\";\nimport { ProjectTypeConst, ProjectType } from \"../../../utils/projectConst\";\nimport { getOptions, postOptions } from \"../../../utils/httpConfig\";\nimport RightTop from \"../../../components/rightbar/rightTop\";\nimport RightBottom from \"../../../components/rightbar/rightBottom\";\nimport Skeleton from \"../../../components/skeleton/skeleton\";\nimport \"../projectDetails/projectDetail.scss\";\nimport \"./postProjectProposal.scss\";\nimport Label from \"../../../components/customLabel/label\";\nimport Milestone from \"./projectProposalDetails/proposalCompnents/milestone\";\nimport Hourly from \"./projectProposalDetails/proposalCompnents/hourly\";\nimport FreeContract from \"./projectProposalDetails/proposalCompnents/freeContract\";\nimport OfficeWork from \"./projectProposalDetails/proposalCompnents/officeWork\";\nimport ContestTypeProposal from \"./projectProposalDetails/proposalCompnents/constestType\";\nimport Currency from \"../../../components/currency\";\nimport Format from \"../../../components/numberFormat\";\nimport ProjectTypeBadge from \"../../../components/project/projectTypeBadge\";\nimport FormatDWH from \"../../../components/formatDWH\";\nimport ProjectCardbox from \"../allprojects/projectCardbox\";\nimport SubHeader from \"../../../components/subHeader\";\nimport notifications from \"../../../utils/notifications\";\nimport { uploadImage, deleteImage } from \"../../../services/uploadImages\";\nimport FileUploadLoader from \"../../../components/loader/fileUpload\";\n\nclass PostProjectProposal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userId: props.authUser?.freelancerAuth?.individualFreelancerId\n        ? props.authUser?.freelancerAuth?.individualFreelancerId\n        : props.authUser?.organizationAuth?.organizationId,\n      projectId:\n        new URLSearchParams(this.props.location.search).get(\"projectId\") !==\n        null\n          ? new URLSearchParams(this.props.location.search).get(\"projectId\")\n          : \"\",\n      projectProposalId:\n        new URLSearchParams(this.props.location.search).get(\n          \"projectProposalId\"\n        ) !== null\n          ? new URLSearchParams(this.props.location.search).get(\n              \"projectProposalId\"\n            )\n          : \"\",\n      description: \"\",\n      coverLetter: \"\",\n      amount: \"\",\n      hourlyAmount: \"\",\n      expectedCompletionDays: \"\",\n      milestone: {\n        milestoneId: 1,\n        milestoneDescription: \"\",\n        milestoneAmount: \"\",\n        milestoneDueDate: \"\",\n      },\n      milestoneList: [],\n      screeningQuestionList: [],\n      isSkeletonLoading: false,\n      selectedProject: {},\n      errorMessage: {},\n      existingProposalData: {},\n      companyFreelancers: [],\n      documents:[],\n      uploading:false\n    };\n  }\n\n  componentWillMount() {\n    this.bindProject();\n    this.state.milestoneList.push(this.state.milestone);\n    if (this.props.authUser?.organizationAuth?.organizationId) {\n      this.getCompanyMembers();\n    }\n  }\n\n  getCompanyMembers = async () => {\n    let organizationId = this.state.userId;\n    if (organizationId) {\n      let result = await request(\n        `${ENDPOINT[\"GetFreelancersByOrganization\"]}?organizationId=${organizationId}`,\n        postOptions()\n      );\n      if (result.success) {\n        this.setState({ companyFreelancers: result.result });\n      } else {\n        notifications.showWarning(\n          \"Error while loading the freelancer against company\"\n        );\n      }\n    }\n  };\n\n  //#region Bind Contest, Proposal Detail\n  async bindProject() {\n    this.setState({ isSkeletonLoading: true, selectedProject: {} });\n    let result = await request(\n      `${ENDPOINT[\"GetProject\"]}?projectId=` +\n        this.state.projectId /*  + `&userId=` + this.state.userId */,\n      getOptions({})\n    );\n    if (result.success) {\n      let objProject = result.result;\n\n      if (objProject.hasOwnProperty(\"postDateTime\"))\n        objProject.postDateTime = moment(objProject.postDateTime).format(\n          \"DD-MMM-YYYY\"\n        );\n      if (objProject.hasOwnProperty(\"expectedCompletionDays\"))\n        objProject.expectedCompletionDays =\n          objProject.expectedCompletionDays === null ||\n          objProject.expectedCompletionDays.trim() === \"\"\n            ? 0\n            : objProject.expectedCompletionDays;\n      if (objProject.hasOwnProperty(\"projectRemainingDays\"))\n        objProject.projectRemainingDays =\n          objProject.projectRemainingDays === null ||\n          objProject.projectRemainingDays.trim() === \"\"\n            ? 0\n            : objProject.projectRemainingDays;\n      if (objProject.hasOwnProperty(\"projectClosingDate\"))\n        objProject.projectClosingDate = moment(\n          objProject.projectClosingDate\n        ).format(\"DD-MMM-YYYY\");\n      if (objProject.hasOwnProperty(\"projectReviewNoOfStar\"))\n        objProject.projectReviewNoOfStar =\n          objProject.projectReviewNoOfStar.trim() !== \"\"\n            ? parseInt(objProject.projectReviewNoOfStar)\n            : 0;\n      if (objProject.hasOwnProperty(\"documentList\"))\n        objProject.documentList =\n          objProject.documentList === null ? [] : objProject.documentList;\n      if (objProject.hasOwnProperty(\"projectAmount\"))\n        objProject.projectAmount =\n          objProject.projectAmount === null ||\n          objProject.projectAmount.trim() === \"\"\n            ? 0\n            : parseFloat(objProject.projectAmount).toFixed(2);\n      if (objProject.hasOwnProperty(\"fromSalary\"))\n        objProject.fromSalary =\n          objProject.fromSalary === null || objProject.fromSalary.trim() === \"\"\n            ? 0\n            : parseFloat(objProject.fromSalary).toFixed(2);\n      if (objProject.hasOwnProperty(\"toSalary\"))\n        objProject.toSalary =\n          objProject.toSalary === null || objProject.toSalary.trim() === \"\"\n            ? 0\n            : parseFloat(objProject.toSalary).toFixed(2);\n      if (objProject.hasOwnProperty(\"winningAmount\"))\n        objProject.winningAmount =\n          objProject.winningAmount === null ||\n          objProject.winningAmount.trim() === \"\"\n            ? 0\n            : parseFloat(objProject.winningAmount).toFixed(2);\n      if (objProject.hasOwnProperty(\"isUserProposalExist\"))\n        objProject.isUserProposalExist =\n          objProject.isUserProposalExist !== null &&\n          objProject.isUserProposalExist !== \"\"\n            ? objProject.isUserProposalExist\n            : false;\n      if (objProject.hasOwnProperty(\"proposalCount\"))\n        objProject.proposalCount =\n          objProject.proposalCount === null ||\n          objProject.proposalCount.trim() === \"\"\n            ? 0\n            : objProject.proposalCount;\n      if (objProject.hasOwnProperty(\"amountPerDay\"))\n        objProject.amountPerDay =\n          objProject.amountPerDay === null ||\n          objProject.amountPerDay.trim() === \"\"\n            ? 0\n            : parseFloat(objProject.amountPerDay).toFixed(2);\n      if (objProject.hasOwnProperty(\"amountPerHour\"))\n        objProject.amountPerHour =\n          objProject.amountPerHour === null ||\n          objProject.amountPerHour.trim() === \"\"\n            ? 0\n            : parseFloat(objProject.amountPerHour).toFixed(2);\n      if (\n        objProject.hasOwnProperty(\"hourlyDetails\") &&\n        objProject.hourlyDetails !== \"\"\n      )\n        objProject.fromSalary =\n          objProject.hourlyDetails.trim() === \"\"\n            ? 0\n            : Math.min\n                .apply(\n                  Math,\n                  JSON.parse(objProject.hourlyDetails).map(function (x) {\n                    return x.fromAmount;\n                  })\n                )\n                .toFixed(2);\n      if (objProject.hasOwnProperty(\"maximumWeekHours\"))\n        objProject.maximumWeekHours =\n          objProject.maximumWeekHours !== undefined &&\n          objProject.maximumWeekHours !== null &&\n          objProject.maximumWeekHours.trim() !== \"\"\n            ? parseInt(objProject.maximumWeekHours)\n            : 0;\n\n      if (objProject.hasOwnProperty(\"screeningQuestions\")) {\n        if (\n          objProject.screeningQuestions &&\n          objProject.screeningQuestions.trim() !== \"\" &&\n          objProject.screeningQuestions !== null &&\n          objProject.screeningQuestions !== undefined\n        ) {\n          let screeningQuestions = JSON.parse(objProject.screeningQuestions);\n          screeningQuestions.map((objProject, i) => {\n            this.state.screeningQuestionList.push({\n              questionId: objProject.questionId,\n              question: objProject.question,\n              answer: \"\",\n            });\n          });\n        } else objProject.screeningQuestionList = [];\n      }\n\n      objProject.jobDescription = objProject.jobDescription.startsWith(\"<p>\")\n        ? objProject.jobDescription.slice(3)\n        : objProject.jobDescription;\n      objProject.jobDescription = objProject.jobDescription.endsWith(\"</p>\")\n        ? objProject.jobDescription.slice(0, -4)\n        : objProject.jobDescription;\n\n      if (this.state.projectProposalId) {\n        this.bindProposalDetail();\n      }\n\n      this.setState({\n        isSkeletonLoading: false,\n        selectedProject: objProject,\n      });\n    } else {\n      this.props.onRouteChange(\"/all-projects\");\n      this.props.history.push(\"/all-projects\");\n    }\n  }\n\n  async bindProposalDetail() {\n    let result = await request(\n      `${ENDPOINT[\"GetProposal\"]}?projectProposalId=${this.state.projectProposalId}`,\n      getOptions({})\n    );\n\n    if (result.success) {\n      let element = result.result;\n\n      this.setState({\n        description: element.description,\n        coverLetter: element.coverLetter,\n        existingProposalData: element,\n      });\n\n      let screeningQuestions = this.state.screeningQuestionList;\n      screeningQuestions.map((screeningQuestion, i) => {\n        let question = JSON.parse(element.screeningQuestions).find(\n          (x) => x.questionId === screeningQuestion.questionId\n        );\n        if (question !== null) screeningQuestion.answer = question.answer;\n      });\n    }\n  }\n  //#endregion Bind Contest, Proposal Detail\n\n  //#region Click Events\n  addClickMilestone = () => {\n    let array = this.state.milestoneList;\n    const maxMilestoneId = Math.max(\n      ...this.state.milestoneList.map((item) => item.milestoneId)\n    );\n    array.push({\n      id: maxMilestoneId + 1,\n      milestoneDescription: \"\",\n      milestoneAmount: \"\",\n      milestoneDueDate: \"\",\n    });\n    this.setState({ milestoneList: array });\n  };\n\n  removeClickMilestone = (index) => {\n    let array = this.state.milestoneList;\n    if (index !== -1) {\n      array.splice(index, 1);\n      this.setState({ milestoneList: array });\n    }\n  };\n  //#endregion Click Events\n\n  //#region Post Contest Proposal\n  handleValidation() {\n    let { languageType } = this.props;\n    let errorMessage = {};\n    let formIsValid = true;\n\n    if (this.state.projectId === null || this.state.projectId === \"\") {\n      formIsValid = false;\n      errorMessage[\"projectId\"] = languageType.REQUIRED_MESSAGE;\n    } else if (\n      this.state.description === null ||\n      this.state.description === \"\"\n    ) {\n      formIsValid = false;\n      errorMessage[\"description\"] = languageType.REQUIRED_MESSAGE;\n    } else if (\n      (this.state.selectedProject.projectType === ProjectType.Contest ||\n        this.state.selectedProject.projectType === ProjectType.FreeContract ||\n        this.state.selectedProject.projectType === ProjectType.OfficeWork) &&\n      (!this.state.amount ||\n        this.state.amount === null ||\n        this.state.amount === \"\")\n    ) {\n      formIsValid = false;\n      errorMessage[\"amount\"] = languageType.REQUIRED_MESSAGE;\n    } else if (\n      this.state.selectedProject.projectType === ProjectType.Hourly &&\n      (!this.state.hourlyAmount ||\n        this.state.hourlyAmount === null ||\n        this.state.hourlyAmount === \"\")\n    ) {\n      formIsValid = false;\n      errorMessage[\"hourlyAmount\"] = languageType.REQUIRED_MESSAGE;\n    } else if (\n      this.state.selectedProject.projectType === ProjectType.Milestone &&\n      this.state.milestoneList.filter((x) => x.milestoneDescription === \"\")\n        .length > 0\n    ) {\n      formIsValid = false;\n      errorMessage[\"milestone\"] = languageType.REQUIRED_MESSAGE;\n    } else if (\n      this.state.selectedProject.projectType === ProjectType.Milestone &&\n      this.state.milestoneList.filter(\n        (x) => x.milestoneAmount === \"\" || x.milestoneAmount === \"0\"\n      ).length > 0\n    ) {\n      formIsValid = false;\n      errorMessage[\"milestone\"] = languageType.REQUIRED_MESSAGE;\n    } else if (\n      this.state.selectedProject.projectType === ProjectType.Milestone &&\n      this.state.milestoneList.filter((x) => x.milestoneDueDate === \"\").length >\n        0\n    ) {\n      formIsValid = false;\n      errorMessage[\"milestone\"] = languageType.REQUIRED_MESSAGE;\n    } else if (\n      this.state.selectedProject.isCoverLetterRequired &&\n      (this.state.coverLetter === null || this.state.coverLetter === \"\")\n    ) {\n      formIsValid = false;\n      errorMessage[\"coverLetter\"] = languageType.REQUIRED_MESSAGE;\n    } else if (\n      this.state.screeningQuestionList.length > 0 &&\n      this.state.screeningQuestionList.filter((x) => x.answer === \"\").length > 0\n    ) {\n      formIsValid = false;\n      errorMessage[\"answer\"] = languageType.REQUIRED_MESSAGE;\n    }\n\n    this.setState({ errorMessage: errorMessage });\n    return formIsValid;\n  }\n\n  //#endregion Post Contest Proposal\n\n  //#region Form Submit Method\n  onFormSubmitHandle = (event) => {\n    event.preventDefault();\n  };\n  //#endregion Form Submit Method\n  // setting validation\\\n  handleInitialValidation = (type) => {\n    let { languageType } = this.props;\n    let errorMessage = {};\n    errorMessage[type] = languageType.REQUIRED_MESSAGE;\n    this.setState({ errorMessage: errorMessage });\n  };\n  handleUpdateBasicInfo = (type, value) => {\n    let errMsg = this.state.errorMessage;\n    delete errMsg[type];\n    this.setState({ [type]: value, errorMessage: errMsg });\n  };\n   handleUploadImage = async (file) => {\n    this.setState({uploading:true})\n    let response = await uploadImage(file, \"photos\");\n    if (response.success) {\n      this.setState({documents:[...this.state.documents,response.result.s3Key],uploading:false})\n\n    } else {\n      notifications.showError(response || \"Error uploading image.\");\n      this.setState({uploading:false})\n    }\n  };\n\n   handleDeleteImage = async (key,index) => {\n    let documentsAll=[...this.state.documents]\n     documentsAll.splice(index,1)\n    this.setState({documents:documentsAll})\n    if (key.slice(0, 5) != \"https\") {\n      await deleteImage(key);\n    }\n  };\n  render() {\n    let { languageType } = this.props;\n    let lessText = \"Show Less\";\n    let {\n      isSkeletonLoading,\n      selectedProject,\n      coverLetter,\n      description,\n      userId,\n      projectId,\n      projectProposalId,\n      existingProposalData,\n      companyFreelancers,\n      documents,\n      uploading\n    } = this.state;\n\n    let isMilestone,\n      isHourly,\n      isFreeContract,\n      isofficeWork,\n      iscontest = false;\n    if (selectedProject.projectType === ProjectType.Milestone)\n      isMilestone = true;\n    if (selectedProject.projectType === ProjectType.Hourly) isHourly = true;\n    if (\n      selectedProject.projectType === ProjectType.FreeContract ||\n      selectedProject.projectType === \"Free Contract\"\n    ) {\n      isFreeContract = true;\n    }\n    if (\n      selectedProject.projectType &&\n      selectedProject.projectType.replace(/\\s/g, \"\") === ProjectType.OfficeWork\n    )\n      isofficeWork = true;\n    if (selectedProject.projectType === ProjectType.Contest) iscontest = true;\n    return (\n      <>\n        <SubHeader />\n        <section className=\"card_sec\">\n          <div className=\"bcknd_container\">\n            <div className=\"row\">\n              <div className=\"col-lg-2 col-md-12\"></div>\n              <div className=\"col-lg-8 col-md-12\">\n                {/*Contest Detail*/}\n                <Skeleton count={5} isSkeletonLoading={isSkeletonLoading} />\n\n                <div\n                  className=\"project-client-detail-area project_propose_area\"\n                  hidden={isSkeletonLoading}\n                  style={{ marginTop: \"20px\" }}\n                >\n                  <h4\n                    className=\"project-client-detail-heading\"\n                    style={{ textTransform: \"uppercase\" }}\n                  >\n                    {languageType.PROJECT_PROPOSAL}\n                  </h4>\n\n                  <div className=\"row\">\n                    <div className=\"col-12 project_propose_area_cardBox_colAlign\">\n                      <ProjectCardbox\n                        key={`cardProject${0}`}\n                        selectedProject={selectedProject}\n                        index={0}\n                        IsNewDesign={1}\n                      />\n                    </div>\n                  </div>\n                  <h4\n                    className=\"project-client-detail-heading\"\n                    style={{ textTransform: \"uppercase\" }}\n                  >\n                    {languageType.PROJECT_DETAIL}\n                  </h4>\n\n                  <div className=\"input_proposal_area\">\n                    <div className=\"row\">\n                      <div className=\"col-12 col-md-10\">\n                        {\" \"}\n                        <Label\n                          title={\"Propose Description\"}\n                          compulsory={true}\n                        />\n                        <input\n                          type=\"text\"\n                          value={coverLetter}\n                          onChange={(event) =>\n                            this.handleUpdateBasicInfo(\n                              \"coverLetter\",\n                              event.target.value\n                            )\n                          }\n                          placeholder=\"Proposing Title\"\n                        />\n                        {this.state.errorMessage.coverLetter && (\n                          <p className=\"text-danger\">\n                            {\" \"}\n                            {this.state.errorMessage.coverLetter}{\" \"}\n                          </p>\n                        )}\n                      </div>\n                      <div className=\"col-12 col-md-2\">\n                        <label  for={\"proposal-file-upload\"}>\n                        <div className=\"attach-files-button-for-proposal\">\n                           <div>  Attach file  &nbsp;  <i class=\"fas fa-paperclip\"></i></div>\n                         </div>\n                        </label>\n                        <input type={\"file\"}\n                          accept=\"jpg jpeg png PNG gif\"\n                          onChange={(e) => {\n                            let size = e.target.files[0]\n                              ? e.target.files[0].size\n                              : 0;\n                            if (size < 1048576) {\n                              this.handleUploadImage(e.target.files[0]);\n                            } else {\n                              notifications.showWarning(\n                                languageType.IMAGE_UPLOADING_SIZE_TEXT\n                              );\n                            }\n                          }}\n                        id={\"proposal-file-upload\"}  style={{visibility:\"hidden\",height:'0px'}} />\n                       \n                      </div>\n                      \n                    </div>\n\n                    <textarea\n                      name=\"textarea\"\n                      rows=\"10\"\n                      value={description}\n                      onChange={(event) =>\n                        this.handleUpdateBasicInfo(\n                          \"description\",\n                          event.target.value\n                        )\n                      }\n                      placeholder=\"Write your proposal here\"\n                    ></textarea>\n                    {this.state.errorMessage.description && (\n                      <p className=\"text-danger\">\n                        {\" \"}\n                        {this.state.errorMessage.description}{\" \"}\n                      </p>\n                    )}\n                    <br />\n                    <div className=\"row\">\n                    <div hidden={documents.length===0} className=\"col-12\">\n                    <br />\n                        <div className=\"uploaded-files-area-proposal\">\n                          {\n                            documents.map((item,index)=>( <div className=\"uploaded-files-area-proposal-item\">\n                            <i class=\"fas fa-paperclip\"></i> <span>{item}</span> <i title=\"Delate this file\" onClick={()=>this.handleDeleteImage(item,index)} class=\"fas fa-close\"></i>\n                            </div>))\n                          }\n                         \n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {isMilestone && (\n                    <Milestone\n                      selectedProject={{ ...selectedProject }}\n                      proposalData={{\n                        userId: userId,\n                        projectId: projectId,\n                        coverLetter: coverLetter,\n                        description: description,\n                        screeningQuestionList: this.state.screeningQuestionList,\n                        projectProposalId: projectProposalId,\n                      }}\n                      handleInitialValidation={this.handleInitialValidation}\n                      languageType={languageType}\n                      existingProposalData={existingProposalData}\n                      companyFreelancers={companyFreelancers}\n                      documents={documents}\n                      {...this.props}\n                    />\n                  )}\n\n                  {isHourly && (\n                    <Hourly\n                      selectedProject={{ ...selectedProject }}\n                      proposalData={{\n                        userId: userId,\n                        projectId: projectId,\n                        coverLetter: coverLetter,\n                        description: description,\n                        screeningQuestionList: this.state.screeningQuestionList,\n                        projectProposalId: projectProposalId,\n                      }}\n                      handleInitialValidation={this.handleInitialValidation}\n                      languageType={languageType}\n                      documents={documents}\n                      existingProposalData={existingProposalData}\n                      companyFreelancers={companyFreelancers}\n                      {...this.props}\n                    />\n                  )}\n                  {isFreeContract && (\n                    <FreeContract\n                      selectedProject={{ ...selectedProject }}\n                      proposalData={{\n                        userId: userId,\n                        projectId: projectId,\n                        coverLetter: coverLetter,\n                        description: description,\n                        screeningQuestionList: this.state.screeningQuestionList,\n                        projectProposalId: projectProposalId,\n                      }}\n                      handleInitialValidation={this.handleInitialValidation}\n                      languageType={languageType}\n                      existingProposalData={existingProposalData}\n                      documents={documents}\n                      companyFreelancers={companyFreelancers}\n                      {...this.props}\n                    />\n                  )}\n                  {isofficeWork && (\n                    <OfficeWork\n                      selectedProject={{ ...selectedProject }}\n                      proposalData={{\n                        userId: userId,\n                        projectId: projectId,\n                        coverLetter: coverLetter,\n                        description: description,\n                        screeningQuestionList: this.state.screeningQuestionList,\n                        projectProposalId: projectProposalId,\n                      }}\n                      handleInitialValidation={this.handleInitialValidation}\n                      languageType={languageType}\n                      existingProposalData={existingProposalData}\n                      documents={documents}\n                      companyFreelancers={companyFreelancers}\n                      {...this.props}\n                    />\n                  )}\n                  {iscontest && (\n                    <ContestTypeProposal\n                      selectedProject={{ ...selectedProject }}\n                      proposalData={{\n                        userId: userId,\n                        projectId: projectId,\n                        coverLetter: coverLetter,\n                        description: description,\n                        screeningQuestionList: this.state.screeningQuestionList,\n                        projectProposalId: projectProposalId,\n                      }}\n                      handleInitialValidation={this.handleInitialValidation}\n                      languageType={languageType}\n                      existingProposalData={existingProposalData}\n                      {...this.props}\n                    />\n                  )}\n                </div>\n              </div>\n              <div className=\"col-lg-2 col-md-12\">\n                {/* <RightTop />\n                <RightBottom /> */}\n              </div>\n            </div>\n          </div>\n        </section>\n        <FileUploadLoader title={\" Uploading new file...\"} show={uploading} />\n      </>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    languageType: state.languageReducer.languageType,\n    language: state.languageReducer.language,\n    activeRoute: state.routeStore.activeRoute,\n    authUser: state.authReducer,\n  };\n}\n\nfunction mapDispatchProps(dispatch) {\n  return {\n    onRouteChange: (activeRoute) => {\n      dispatch(onReduxRouteChange(activeRoute));\n    },\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchProps)(PostProjectProposal);\n"]},"metadata":{},"sourceType":"module"}