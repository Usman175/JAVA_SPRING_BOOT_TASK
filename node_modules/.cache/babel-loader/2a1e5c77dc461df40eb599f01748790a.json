{"ast":null,"code":"var _jsxFileName = \"/var/www/php74/bearolefrontend/src/container/freelancer/proposals/myProposal.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { onReduxLangaugeChange } from \"../../../store/action/action\";\nimport request from \"../../../utils/request\";\nimport { ENDPOINT } from \"../../../utils/endpoint\";\nimport { getOptions } from \"../../../utils/httpConfig\";\nimport RightTop from \"../../../components/rightbar/rightTop\";\nimport RightBottom from \"../../../components/rightbar/rightBottom\";\nimport ProjectTypeFilter from \"../../../components/project/projectTypeFilter\";\nimport UserCard from \"../../../components/proposals/userCard\";\nimport { ProposalTipCard } from \"../../../components/proposals/proposalTipCard\";\nimport Proposals from \"../../../components/proposals/proposals\";\nimport Skeleton from \"../../../components/skeleton/skeleton\";\nimport Pagination from \"../../../components/pagination\";\nimport SubHeader from \"../../../components/subHeader\";\nimport \"./myProposal.scss\";\n\nclass MyProposal extends Component {\n  constructor(props) {\n    var _props$authUser, _props$authUser$freel, _props$authUser2, _props$authUser2$free, _props$authUser3, _props$authUser3$orga;\n\n    super(props);\n\n    this.onCheckboxChangeHandle = (event, type, index) => {\n      let {\n        projectTypes,\n        projectStatuses\n      } = this.state;\n      let {\n        checked\n      } = event.target;\n\n      if (type === \"projectTypes\") {\n        projectTypes[index].checked = checked;\n        this.state.selectedProjectType = \"\";\n        projectTypes.map((element, i) => {\n          if (element.checked) this.state.selectedProjectType += (this.state.selectedProjectType !== \"\" ? \",\" : \"\") + element.title;\n        });\n      }\n\n      if (type === \"projectStatuses\") {\n        projectStatuses[index].checked = checked;\n        this.state.selectedProjectType = \"\";\n        projectStatuses.map((element, i) => {\n          if (element.checked) this.state.selectedProjectType += (this.state.selectedProjectStatus !== \"\" ? \",\" : \"\") + element.title;\n        });\n      }\n\n      this.setState({\n        projectTypes,\n        projectStatuses\n      });\n      let redirectTo = \"\";\n      if (this.state.searchProject !== \"\") redirectTo += `?searchProject=` + this.state.searchProject;\n      if (this.state.selectedCategory !== \"\") redirectTo += (redirectTo !== \"\" ? `&category=` : `?category=`) + this.state.selectedCategory;\n      if (this.state.selectedProjectType !== \"\") redirectTo += (redirectTo !== \"\" ? `&type=` : `?type=`) + this.state.selectedProjectType;\n      if (this.state.selectedProjectStatus !== \"\") redirectTo += (redirectTo !== \"\" ? `&status=` : `?status=`) + this.state.selectedProjectStatus;\n      redirectTo += redirectTo === \"\" ? this.props.location.pathname : \"\";\n      this.props.history.push(redirectTo);\n    };\n\n    let searchProject = new URLSearchParams(this.props.location.search).get(\"searchProject\");\n    let category = new URLSearchParams(this.props.location.search).get(\"category\");\n\n    let _projectStatuses = new URLSearchParams(this.props.location.search).get(\"status\");\n\n    let projectStatusArray = _projectStatuses !== \"\" && _projectStatuses !== null && _projectStatuses !== undefined ? _projectStatuses.split(\",\") : [];\n    this.state = {\n      searchProject: searchProject !== null && searchProject !== \"\" && searchProject !== undefined ? searchProject : \"\",\n      selectedCategory: category !== null && category !== \"\" && category !== undefined ? category : \"\",\n      selectedProjectType: \"\",\n      selectedProjectStatus: projectStatusArray.length > 0 ? projectStatusArray.join() : \"\",\n      userId: ((_props$authUser = props.authUser) === null || _props$authUser === void 0 ? void 0 : (_props$authUser$freel = _props$authUser.freelancerAuth) === null || _props$authUser$freel === void 0 ? void 0 : _props$authUser$freel.individualFreelancerId) ? (_props$authUser2 = props.authUser) === null || _props$authUser2 === void 0 ? void 0 : (_props$authUser2$free = _props$authUser2.freelancerAuth) === null || _props$authUser2$free === void 0 ? void 0 : _props$authUser2$free.individualFreelancerId : (_props$authUser3 = props.authUser) === null || _props$authUser3 === void 0 ? void 0 : (_props$authUser3$orga = _props$authUser3.organizationAuth) === null || _props$authUser3$orga === void 0 ? void 0 : _props$authUser3$orga.organizationId,\n      projectTypes: [],\n      projectStatuses: [],\n      // projectStatuses: [\n      isSkeletonLoading: false,\n      proposalData: [],\n      userData: this.props.userState.user,\n      pagination: {\n        pageSize: 10,\n        lastPkEvaluated: \"\",\n        pageNumber: 1,\n        total: 10\n      },\n      lastPkEvaluatedTrack: [],\n      isNextPage: true,\n      isPreviousPage: false,\n      userReviews: []\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let category = new URLSearchParams(nextProps.location.search).get(\"category\");\n    let searchProject = new URLSearchParams(nextProps.location.search).get(\"searchProject\");\n    this.state.searchProject = searchProject !== null && searchProject !== \"\" && searchProject !== undefined ? searchProject : \"\";\n    this.state.selectedCategory = category !== null && category !== \"\" && category !== undefined ? category : \"\";\n    this.setState({\n      lastPkEvaluatedTrack: []\n    });\n  }\n\n  componentDidMount() {\n    this.bindProjectTypes();\n    this.bindProjectStatuses();\n    this.bindUser(); // this.bindUserReview();\n\n    this.bindProposals(\"\");\n  } //#region Bind Methods\n\n\n  async bindProjectTypes() {\n    let array = [];\n    let projectTypes = new URLSearchParams(this.props.location.search).get(\"type\");\n    let projectTypeArray = projectTypes !== \"\" && projectTypes !== null && projectTypes !== undefined ? projectTypes.split(\",\") : [];\n    Object.entries(this.props.projectTypes).map((item, index) => {\n      let isChecked = projectTypeArray.includes(item[1]) ? true : false;\n      array.push({\n        name: item[0],\n        title: item[1].text,\n        checked: isChecked\n      });\n      if (isChecked) this.state.selectedProjectType += (this.state.selectedProjectType !== \"\" ? \",\" : \"\") + item[1].value;\n    });\n    this.setState({\n      projectTypes: array\n    });\n  }\n\n  async bindProjectStatuses() {\n    let array = [];\n    let projectStatuses = new URLSearchParams(this.props.location.search).get(\"type\");\n    let projectStatusArray = projectStatuses !== \"\" && projectStatuses !== null && projectStatuses !== undefined ? projectStatuses.split(\",\") : [];\n    Object.entries(this.props.projectStatuses).map((item, index) => {\n      let isChecked = projectStatusArray.includes(item[1]) ? true : false;\n      array.push({\n        name: item[0],\n        title: item[1].text,\n        checked: isChecked\n      });\n      if (isChecked) this.state.selectedProjectStatus += (this.state.selectedProjectStatus !== \"\" ? \",\" : \"\") + item[1].value;\n    });\n    this.setState({\n      projectStatuses: array\n    });\n  }\n\n  async bindProposals(lastPkEvaluated, move) {\n    this.setState({\n      isSkeletonLoading: true,\n      proposalData: []\n    });\n    let pageNumber = this.state.pagination.pageNumber;\n\n    if (move === \"next\") {\n      this.setState({\n        pagination: { ...this.state.pagination,\n          pageNumber: this.state.pagination.pageNumber + 1\n        }\n      });\n      pageNumber = pageNumber + 1;\n    } else if (move === \"prev\") {\n      this.setState({\n        pagination: { ...this.state.pagination,\n          pageNumber: this.state.pagination.pageNumber - 1\n        }\n      });\n      pageNumber = pageNumber - 1;\n    }\n\n    let queryString = `?projectTypes=` + this.state.selectedProjectType + `&projectStatus=` + this.state.selectedProjectStatus + `&projectScope=` + this.state.selectedCategory + `&search=` + this.state.searchProject + `&freelancerReferenceId=` + this.state.userId + `&pageSize=` + this.state.pagination.pageSize + `&pageNumber=` + pageNumber; // 1 +\n    // `&lastPkEvaluated=` +\n    // lastPkEvaluated +\n    // `&isHired=` +\n    // false;\n\n    let result = await request(`${ENDPOINT[\"GetUserProposals\"]}` + queryString, getOptions({}));\n\n    if (result.success) {\n      var _this$state;\n\n      let array = result.result.entries ? result.result.entries : [];\n      array = array.filter(itemData => itemData.isHired !== true);\n      let lastPkEvaluatedTrackLocal = this === null || this === void 0 ? void 0 : (_this$state = this.state) === null || _this$state === void 0 ? void 0 : _this$state.lastPkEvaluatedTrack;\n\n      if (move === \"next\") {\n        lastPkEvaluatedTrackLocal.push(lastPkEvaluated);\n      } else if (move === \"prev\") {\n        lastPkEvaluatedTrackLocal.pop();\n      }\n\n      this.setState({\n        //proposalData: array.length > 0 ? array : this.state.proposalData,\n        isSkeletonLoading: false,\n        proposalData: array,\n        pagination: {\n          pageSize: this.state.pagination.pageSize,\n          lastPkEvaluated: result.result.lastPkEvaluated,\n          ...this.state.pagination\n        },\n        lastPkEvaluatedTrack: lastPkEvaluatedTrackLocal,\n        isNextPage: result.result.isNextPage,\n        isPreviousPage: result.result.isPreviousPage\n      });\n      window.scrollTo({\n        top: 0,\n        behavior: \"smooth\"\n      });\n    } else {\n      this.setState({\n        isSkeletonLoading: false\n      });\n    }\n  }\n\n  async bindUser() {\n    if (!this.props.userState.user && !this.props.userState.isLoading) {\n      var _result$result;\n\n      let result = await request(`${ENDPOINT[\"GetUser\"]}?userId=${this.state.userId}`, getOptions({}));\n\n      if (result.success && result.result.data && Object.keys((_result$result = result.result) === null || _result$result === void 0 ? void 0 : _result$result.data).length > 0) {\n        this.setState({\n          userData: result.result.data\n        });\n      }\n    }\n  }\n\n  async bindUserReview() {\n    let result = await request(`${ENDPOINT[\"GetProjectReviewFreeLancerWise\"]}?freelancerUserId=${this.state.userId}`);\n\n    if (result.success && result.result.data && Object.keys(result.result.data).length > 0) {\n      this.setState({\n        userReviews: result.result.data\n      });\n    }\n  } //#endregion Bind Methods\n  //#region Change Event\n\n\n  //#endregion Change Event\n  render() {\n    let {\n      isSkeletonLoading,\n      proposalData,\n      projectTypes,\n      projectStatuses,\n      userData,\n      pagination,\n      lastPkEvaluatedTrack,\n      userReviews,\n      isNextPage,\n      isPreviousPage\n    } = this.state;\n    const user = this.props.userState.user || userData;\n    let {\n      languageType\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SubHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"card_proposals\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bcknd_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-2 col-md-12\",\n      style: {\n        marginTop: \"-20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      hidden: true,\n      className: \"col-lg-12 col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(UserCard, {\n      userObj: { ...user,\n        userReviews\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-6\",\n      style: {\n        marginTop: \"0px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(ProjectTypeFilter, {\n      onChange: this.onCheckboxChangeHandle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-8 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      hidden: !isSkeletonLoading,\n      style: {\n        marginTop: \"-20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Skeleton, {\n      count: this.state.pagination.pageSize,\n      isSkeletonLoading: isSkeletonLoading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 19\n      }\n    })), !isSkeletonLoading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_box pl-1 pt-1 cardBox_proposal_MarginMobile\",\n      style: {\n        marginTop: \"0px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      hidden: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 21\n      }\n    }, \" \", /*#__PURE__*/React.createElement(ProposalTipCard, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(Proposals, Object.assign({\n      handleWithdrawProposal: () => this.bindProposals(\"\"),\n      languageType: languageType,\n      proposalData: proposalData\n    }, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 21\n      }\n    }))), (proposalData === null || proposalData === void 0 ? void 0 : proposalData.length) > 0 && /*#__PURE__*/React.createElement(Pagination, {\n      isPreviousPage: pagination.pageNumber > 1 ? true : false,\n      isNextPage: pagination.pageNumber * pagination.pageSize < pagination.total ? true : false,\n      pageNumber: pagination.pageNumber,\n      lastPkEvaluatedTrack: proposalData,\n      moveBack: () => this.bindProposals(\"prev\"),\n      moveNext: () => this.bindProposals(\"next\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      hidden: true,\n      className: \"col-lg-2 col-md-12\",\n      style: {\n        marginTop: \"-20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(RightTop, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(RightBottom, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 17\n      }\n    }))))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    languageType: state.languageReducer.languageType,\n    language: state.languageReducer.language,\n    activeRoute: state.routeStore.activeRoute,\n    authUser: state.authReducer,\n    projectTypes: state.languageReducer.projectTypes,\n    projectStatuses: state.languageReducer.projectStatuses,\n    userState: state.userReducer\n  };\n}\n\nfunction mapDispatchProps(dispatch) {\n  return {\n    onLangaugeChange: langauge => {\n      dispatch(onReduxLangaugeChange(langauge));\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchProps)(MyProposal);","map":{"version":3,"sources":["/var/www/php74/bearolefrontend/src/container/freelancer/proposals/myProposal.jsx"],"names":["React","Component","connect","onReduxLangaugeChange","request","ENDPOINT","getOptions","RightTop","RightBottom","ProjectTypeFilter","UserCard","ProposalTipCard","Proposals","Skeleton","Pagination","SubHeader","MyProposal","constructor","props","onCheckboxChangeHandle","event","type","index","projectTypes","projectStatuses","state","checked","target","selectedProjectType","map","element","i","title","selectedProjectStatus","setState","redirectTo","searchProject","selectedCategory","location","pathname","history","push","URLSearchParams","search","get","category","projectStatusArray","undefined","split","length","join","userId","authUser","freelancerAuth","individualFreelancerId","organizationAuth","organizationId","isSkeletonLoading","proposalData","userData","userState","user","pagination","pageSize","lastPkEvaluated","pageNumber","total","lastPkEvaluatedTrack","isNextPage","isPreviousPage","userReviews","componentWillReceiveProps","nextProps","componentDidMount","bindProjectTypes","bindProjectStatuses","bindUser","bindProposals","array","projectTypeArray","Object","entries","item","isChecked","includes","name","text","value","move","queryString","result","success","filter","itemData","isHired","lastPkEvaluatedTrackLocal","pop","window","scrollTo","top","behavior","isLoading","data","keys","bindUserReview","render","languageType","marginTop","mapStateToProps","languageReducer","language","activeRoute","routeStore","authReducer","userReducer","mapDispatchProps","dispatch","onLangaugeChange","langauge"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { onReduxLangaugeChange } from \"../../../store/action/action\";\nimport request from \"../../../utils/request\";\nimport { ENDPOINT } from \"../../../utils/endpoint\";\nimport { getOptions } from \"../../../utils/httpConfig\";\nimport RightTop from \"../../../components/rightbar/rightTop\";\nimport RightBottom from \"../../../components/rightbar/rightBottom\";\nimport ProjectTypeFilter from \"../../../components/project/projectTypeFilter\";\nimport UserCard from \"../../../components/proposals/userCard\";\nimport { ProposalTipCard } from \"../../../components/proposals/proposalTipCard\";\nimport Proposals from \"../../../components/proposals/proposals\";\nimport Skeleton from \"../../../components/skeleton/skeleton\";\nimport Pagination from \"../../../components/pagination\";\nimport SubHeader from \"../../../components/subHeader\";\nimport \"./myProposal.scss\";\n\nclass MyProposal extends Component {\n  constructor(props) {\n    super(props);\n\n    let searchProject = new URLSearchParams(this.props.location.search).get(\n      \"searchProject\"\n    );\n    let category = new URLSearchParams(this.props.location.search).get(\n      \"category\"\n    );\n    let projectStatuses = new URLSearchParams(this.props.location.search).get(\n      \"status\"\n    );\n    let projectStatusArray =\n      projectStatuses !== \"\" &&\n      projectStatuses !== null &&\n      projectStatuses !== undefined\n        ? projectStatuses.split(\",\")\n        : [];\n\n    this.state = {\n      searchProject:\n        searchProject !== null &&\n        searchProject !== \"\" &&\n        searchProject !== undefined\n          ? searchProject\n          : \"\",\n      selectedCategory:\n        category !== null && category !== \"\" && category !== undefined\n          ? category\n          : \"\",\n      selectedProjectType: \"\",\n      selectedProjectStatus:\n        projectStatusArray.length > 0 ? projectStatusArray.join() : \"\",\n      userId: props.authUser?.freelancerAuth?.individualFreelancerId\n        ? props.authUser?.freelancerAuth?.individualFreelancerId\n        : props.authUser?.organizationAuth?.organizationId,\n      projectTypes: [],\n      projectStatuses: [],\n      // projectStatuses: [\n      isSkeletonLoading: false,\n      proposalData: [],\n      userData: this.props.userState.user,\n      pagination: {\n        pageSize: 10,\n        lastPkEvaluated: \"\",\n        pageNumber: 1,\n        total: 10,\n      },\n      lastPkEvaluatedTrack: [],\n      isNextPage: true,\n      isPreviousPage: false,\n      userReviews: [],\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let category = new URLSearchParams(nextProps.location.search).get(\n      \"category\"\n    );\n    let searchProject = new URLSearchParams(nextProps.location.search).get(\n      \"searchProject\"\n    );\n\n    this.state.searchProject =\n      searchProject !== null &&\n      searchProject !== \"\" &&\n      searchProject !== undefined\n        ? searchProject\n        : \"\";\n    this.state.selectedCategory =\n      category !== null && category !== \"\" && category !== undefined\n        ? category\n        : \"\";\n\n    this.setState({ lastPkEvaluatedTrack: [] });\n  }\n\n  componentDidMount() {\n    this.bindProjectTypes();\n    this.bindProjectStatuses();\n    this.bindUser();\n    // this.bindUserReview();\n    this.bindProposals(\"\");\n  }\n\n  //#region Bind Methods\n  async bindProjectTypes() {\n    let array = [];\n    let projectTypes = new URLSearchParams(this.props.location.search).get(\n      \"type\"\n    );\n    let projectTypeArray =\n      projectTypes !== \"\" && projectTypes !== null && projectTypes !== undefined\n        ? projectTypes.split(\",\")\n        : [];\n\n    Object.entries(this.props.projectTypes).map((item, index) => {\n      let isChecked = projectTypeArray.includes(item[1]) ? true : false;\n      array.push({\n        name: item[0],\n        title: item[1].text,\n        checked: isChecked,\n      });\n      if (isChecked)\n        this.state.selectedProjectType +=\n          (this.state.selectedProjectType !== \"\" ? \",\" : \"\") + item[1].value;\n    });\n    this.setState({ projectTypes: array });\n  }\n\n  async bindProjectStatuses() {\n    let array = [];\n\n    let projectStatuses = new URLSearchParams(this.props.location.search).get(\n      \"type\"\n    );\n\n    let projectStatusArray =\n      projectStatuses !== \"\" &&\n      projectStatuses !== null &&\n      projectStatuses !== undefined\n        ? projectStatuses.split(\",\")\n        : [];\n\n    Object.entries(this.props.projectStatuses).map((item, index) => {\n      let isChecked = projectStatusArray.includes(item[1]) ? true : false;\n      array.push({\n        name: item[0],\n        title: item[1].text,\n        checked: isChecked,\n      });\n      if (isChecked)\n        this.state.selectedProjectStatus +=\n          (this.state.selectedProjectStatus !== \"\" ? \",\" : \"\") + item[1].value;\n    });\n    this.setState({ projectStatuses: array });\n  }\n\n  async bindProposals(lastPkEvaluated, move) {\n    this.setState({ isSkeletonLoading: true, proposalData: [] });\n\n    let pageNumber = this.state.pagination.pageNumber;\n    if (move === \"next\") {\n      this.setState({\n        pagination: {\n          ...this.state.pagination,\n          pageNumber: this.state.pagination.pageNumber + 1,\n        },\n      });\n      pageNumber = pageNumber + 1;\n    } else if (move === \"prev\") {\n      this.setState({\n        pagination: {\n          ...this.state.pagination,\n          pageNumber: this.state.pagination.pageNumber - 1,\n        },\n      });\n      pageNumber = pageNumber - 1;\n    }\n    let queryString =\n      `?projectTypes=` +\n      this.state.selectedProjectType +\n      `&projectStatus=` +\n      this.state.selectedProjectStatus +\n      `&projectScope=` +\n      this.state.selectedCategory +\n      `&search=` +\n      this.state.searchProject +\n      `&freelancerReferenceId=` +\n      this.state.userId +\n      `&pageSize=` +\n      this.state.pagination.pageSize +\n      `&pageNumber=` +\n      pageNumber;\n    // 1 +\n    // `&lastPkEvaluated=` +\n    // lastPkEvaluated +\n    // `&isHired=` +\n    // false;\n    let result = await request(\n      `${ENDPOINT[\"GetUserProposals\"]}` + queryString,\n      getOptions({})\n    );\n    if (result.success) {\n      let array = result.result.entries ? result.result.entries : [];\n      array = array.filter((itemData) => itemData.isHired !== true);\n\n      let lastPkEvaluatedTrackLocal = this?.state?.lastPkEvaluatedTrack;\n      if (move === \"next\") {\n        lastPkEvaluatedTrackLocal.push(lastPkEvaluated);\n      } else if (move === \"prev\") {\n        lastPkEvaluatedTrackLocal.pop();\n      }\n\n      this.setState({\n        //proposalData: array.length > 0 ? array : this.state.proposalData,\n        isSkeletonLoading: false,\n        proposalData: array,\n        pagination: {\n          pageSize: this.state.pagination.pageSize,\n          lastPkEvaluated: result.result.lastPkEvaluated,\n          ...this.state.pagination,\n        },\n        lastPkEvaluatedTrack: lastPkEvaluatedTrackLocal,\n        isNextPage: result.result.isNextPage,\n        isPreviousPage: result.result.isPreviousPage,\n      });\n\n      window.scrollTo({\n        top: 0,\n        behavior: \"smooth\",\n      });\n    } else {\n      this.setState({ isSkeletonLoading: false });\n    }\n  }\n\n  async bindUser() {\n    if (!this.props.userState.user && !this.props.userState.isLoading) {\n      let result = await request(\n        `${ENDPOINT[\"GetUser\"]}?userId=${this.state.userId}`,\n        getOptions({})\n      );\n      if (\n        result.success &&\n        result.result.data &&\n        Object.keys(result.result?.data).length > 0\n      ) {\n        this.setState({ userData: result.result.data });\n      }\n    }\n  }\n\n  async bindUserReview() {\n    let result = await request(\n      `${ENDPOINT[\"GetProjectReviewFreeLancerWise\"]}?freelancerUserId=${this.state.userId}`\n    );\n    if (\n      result.success &&\n      result.result.data &&\n      Object.keys(result.result.data).length > 0\n    ) {\n      this.setState({ userReviews: result.result.data });\n    }\n  }\n\n  //#endregion Bind Methods\n\n  //#region Change Event\n\n  onCheckboxChangeHandle = (event, type, index) => {\n    let { projectTypes, projectStatuses } = this.state;\n    let { checked } = event.target;\n    if (type === \"projectTypes\") {\n      projectTypes[index].checked = checked;\n      this.state.selectedProjectType = \"\";\n      projectTypes.map((element, i) => {\n        if (element.checked)\n          this.state.selectedProjectType +=\n            (this.state.selectedProjectType !== \"\" ? \",\" : \"\") + element.title;\n      });\n    }\n    if (type === \"projectStatuses\") {\n      projectStatuses[index].checked = checked;\n      this.state.selectedProjectType = \"\";\n      projectStatuses.map((element, i) => {\n        if (element.checked)\n          this.state.selectedProjectType +=\n            (this.state.selectedProjectStatus !== \"\" ? \",\" : \"\") +\n            element.title;\n      });\n    }\n    this.setState({ projectTypes, projectStatuses });\n\n    let redirectTo = \"\";\n    if (this.state.searchProject !== \"\")\n      redirectTo += `?searchProject=` + this.state.searchProject;\n    if (this.state.selectedCategory !== \"\")\n      redirectTo +=\n        (redirectTo !== \"\" ? `&category=` : `?category=`) +\n        this.state.selectedCategory;\n    if (this.state.selectedProjectType !== \"\")\n      redirectTo +=\n        (redirectTo !== \"\" ? `&type=` : `?type=`) +\n        this.state.selectedProjectType;\n    if (this.state.selectedProjectStatus !== \"\")\n      redirectTo +=\n        (redirectTo !== \"\" ? `&status=` : `?status=`) +\n        this.state.selectedProjectStatus;\n    redirectTo += redirectTo === \"\" ? this.props.location.pathname : \"\";\n    this.props.history.push(redirectTo);\n  };\n\n  //#endregion Change Event\n\n  render() {\n    let {\n      isSkeletonLoading,\n      proposalData,\n      projectTypes,\n      projectStatuses,\n      userData,\n      pagination,\n      lastPkEvaluatedTrack,\n      userReviews,\n      isNextPage,\n      isPreviousPage,\n    } = this.state;\n    const user = this.props.userState.user || userData;\n    let { languageType } = this.props;\n    return (\n      <>\n        <SubHeader />\n        <section className=\"card_proposals\">\n          <div className=\"bcknd_container\">\n            <div className=\"row\">\n              <div\n                className=\"col-lg-2 col-md-12\"\n                style={{ marginTop: \"-20px\" }}\n              >\n                <div className=\"row\">\n                  <div hidden={true} className=\"col-lg-12 col-md-6\">\n                    <UserCard userObj={{ ...user, userReviews }} />\n                  </div>\n                  <div\n                    className=\"col-lg-12 col-md-6\"\n                    style={{ marginTop: \"0px\" }}\n                  >\n                    <ProjectTypeFilter onChange={this.onCheckboxChangeHandle} />\n                  </div>\n                  {/* <div className=\"col-lg-12 col-md-6\">\n                    <CheckboxCard\n                      title=\"Status\"\n                      data={projectStatuses}\n                      type=\"projectStatuses\"\n                      onChange={this.onCheckboxChangeHandle}\n                    />\n                  </div> */}\n                </div>\n              </div>\n              <div className=\"col-lg-8 col-md-12\">\n                <div hidden={!isSkeletonLoading} style={{ marginTop: \"-20px\" }}>\n                  <Skeleton\n                    count={this.state.pagination.pageSize}\n                    isSkeletonLoading={isSkeletonLoading}\n                  />\n                </div>\n                {!isSkeletonLoading && (\n                  <div\n                    className=\"card_box pl-1 pt-1 cardBox_proposal_MarginMobile\"\n                    style={{ marginTop: \"0px\" }}\n                  >\n                    <span hidden={true}>\n                      {\" \"}\n                      <ProposalTipCard />\n                    </span>\n                    <Proposals\n                      handleWithdrawProposal={() => this.bindProposals(\"\")}\n                      languageType={languageType}\n                      proposalData={proposalData}\n                      {...this.props}\n                    />\n                  </div>\n                )}\n                {/* {proposalData &&\n                  proposalData.map((d, index) => (\n                    <ProposalCard\n                      key={`proposal${index}`}\n                      cardData={d}\n                      props={this.props}\n                    />\n                  ))} */}\n                {proposalData?.length > 0 && (\n                  <Pagination\n                    isPreviousPage={pagination.pageNumber > 1 ? true : false}\n                    isNextPage={\n                      pagination.pageNumber * pagination.pageSize <\n                      pagination.total\n                        ? true\n                        : false\n                    }\n                    pageNumber={pagination.pageNumber}\n                    lastPkEvaluatedTrack={proposalData}\n                    moveBack={() => this.bindProposals(\"prev\")}\n                    moveNext={() => this.bindProposals(\"next\")}\n                  />\n                )}\n              </div>\n              <div\n                hidden={true}\n                className=\"col-lg-2 col-md-12\"\n                style={{ marginTop: \"-20px\" }}\n              >\n                <RightTop />\n                <RightBottom />\n              </div>\n            </div>\n          </div>\n        </section>\n      </>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    languageType: state.languageReducer.languageType,\n    language: state.languageReducer.language,\n    activeRoute: state.routeStore.activeRoute,\n    authUser: state.authReducer,\n    projectTypes: state.languageReducer.projectTypes,\n    projectStatuses: state.languageReducer.projectStatuses,\n    userState: state.userReducer,\n  };\n}\n\nfunction mapDispatchProps(dispatch) {\n  return {\n    onLangaugeChange: (langauge) => {\n      dispatch(onReduxLangaugeChange(langauge));\n    },\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchProps)(MyProposal);\n"]},"metadata":{},"sourceType":"module"}